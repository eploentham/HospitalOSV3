/*
 * PanelReportNan.java
 *
 * Created on 3 มิถุนายน 2549, 14:06 น.
 */

package com.reportnan.gui.panel;
import com.hosv3.control.HosControl;
import com.reportnan.control.Rp18Control;
import com.reportnan.subject.ManageControlSubject;
import com.reportnan.control.ManageControl;
import com.reportnan.subject.ManageSubject;
import com.reportnan.usecase.ShowPanelSelectResp;
import com.reportnan.utility.Config;
import com.hospital_os.object.Version;

/**
 *
 * @author  pu
 */
public class PanelReportNan extends javax.swing.JPanel implements ShowPanelSelectResp
{
    Version theVersion;
    private ManageControlSubject theMCS;
    private ManageControl theManageControl;
    private ManageSubject theManageSubject;
    
    /** Creates new form PanelReportNan */
    public PanelReportNan(ManageControlSubject mcs)
    {
        initComponents();
        this.theMCS = mcs;
        this.theManageControl = this.theMCS.theManageControl;
        this.theManageSubject = this.theMCS.theManageSubject;
        this.theManageSubject.theShowPanelSelectSubject.registerGUIManage(this);
        this.panelReportFile1.setControl(theMCS);
        this.panelReportIndex1.setControl(theMCS);
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {
        java.awt.GridBagConstraints gridBagConstraints;

        jPanelMain = new javax.swing.JPanel();
        panelReportIndex1 = new com.reportnan.gui.panel.PanelReportIndex();
        panelReportFile1 = new com.reportnan.gui.panel.PanelReportFile();
        jButtonBackToMain = new javax.swing.JButton();
        jButtonOK = new javax.swing.JButton();

        setLayout(new java.awt.GridBagLayout());

        jPanelMain.setLayout(new java.awt.CardLayout());
        jPanelMain.add(panelReportIndex1, "MainReport");
        jPanelMain.add(panelReportFile1, "Report");

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.gridwidth = 3;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(3, 10, 10, 10);
        add(jPanelMain, gridBagConstraints);

        jButtonBackToMain.setIcon(new javax.swing.ImageIcon(getClass().getResource("/com/reportnan/gui/images/Back.gif"))); // NOI18N
        jButtonBackToMain.setText("Back");
        jButtonBackToMain.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonBackToMainActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.EAST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(5, 0, 0, 0);
        add(jButtonBackToMain, gridBagConstraints);

        jButtonOK.setIcon(new javax.swing.ImageIcon(getClass().getResource("/com/hospital_os/images/Forward16.gif"))); // NOI18N
        jButtonOK.setText("OK");
        jButtonOK.setHorizontalTextPosition(javax.swing.SwingConstants.LEADING);
        jButtonOK.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonOKActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 2;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.fill = java.awt.GridBagConstraints.VERTICAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.EAST;
        gridBagConstraints.insets = new java.awt.Insets(5, 0, 0, 10);
        add(jButtonOK, gridBagConstraints);
    }// </editor-fold>//GEN-END:initComponents

    private void jButtonBackToMainActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButtonBackToMainActionPerformed
        this.showCardReport("MainReport");
}//GEN-LAST:event_jButtonBackToMainActionPerformed

    private void jButtonOKActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButtonOKActionPerformed
        callReportShow();
}//GEN-LAST:event_jButtonOKActionPerformed

    /**
     *  ใช้ในการส่งข้อมูลไปยัง PanelReportFile เมื่อมีการเลือกรายการบนตารางแสดง
     */
    private void callReportShow()
    {
        int row = this.panelReportIndex1.getSelectedRow();
        //ตรวจสอบ การเลือกข้อมูลบนตาราง
        if(row > -1) {
            theManageSubject.theShowPanelSelectSubject.notifyCallReportShow(
                    panelReportIndex1.getSelectReport());
        }
    }
    /**
     *  ใช้แสดง CardReport ที่กำหนดตาม param ที่กำหนด
     *  @param namepanel เป็นชื่อ panelที่กำหนดใน cardLayout ที่กำหนด
     * Report
     * MainReport
     * PcuReport
     */
    public void showCardReport(String namepanel){
        java.awt.CardLayout layout = (java.awt.CardLayout)this.jPanelMain.getLayout();
        layout.show(this.jPanelMain, namepanel);
    }
    
    /**ใช้ในการกำหนด version ของ การออกรายงานทั่วไป
     *@return เป็น Object ของ Vesion
     */
    public Version getVersion()
    {
        theVersion = new Version();
        theVersion.app_code = Config.getTextBundle("Version");
        theVersion.description = Config.getTextBundle("Description");
        theVersion.update_time = Config.getTextBundle("Update");
        theVersion.db_code = Config.getTextBundle("VersionDatabaseUse");
        return theVersion;
    }
    
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton jButtonBackToMain;
    private javax.swing.JButton jButtonOK;
    private javax.swing.JPanel jPanelMain;
    private com.reportnan.gui.panel.PanelReportFile panelReportFile1;
    private com.reportnan.gui.panel.PanelReportIndex panelReportIndex1;
    // End of variables declaration//GEN-END:variables

    public void notifyCallBackToMainReport()
    {
        this.showCardReport("MainReport");
    }

    public void notifyCallReportShow(com.reportnan.utility.Report report)
    {
        this.showCardReport("Report");
    }
    public void setControl(HosControl theHC, Rp18Control rc) {
//            panelReportPCU1.setControl(rc);
//            panelReportPCU1.setUpdateStatus(theHC.theUS);
    }
    
}
