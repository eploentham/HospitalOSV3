package com.hospital_os.utility;import java.awt.event.*;import javax.swing.*;import javax.swing.text.*;/** * <p>Title: </p> * <p>Description: </p> * <p>Copyright: Copyright (c) 2003</p> * <p>Company: </p> * @author neng * @version 1.0 */public class IntegerTextField extends JTextField implements KeyListener, FocusListener {    boolean transfer_mode = true;    /** จำนวนหลักที่จะมีได้ */    private int columns = 0;    public IntegerTextField() {        setDocument(new IntegerDocument());        addKeyListener(this);        addFocusListener(this);    }    public IntegerTextField(int columnsDigit) {        this();        columns = columnsDigit;    }    public void setDigits(int col){        columns = col;    }    /** ช่วยควบคุมรูปแบบตัวเลข */    protected class IntegerDocument extends PlainDocument {        public void insertString(int offs, String str, AttributeSet a) throws BadLocationException {            if(str!=null) {                char[] source = str.toCharArray();                char[] result = new char[source.length];                int j = 0;                for(int i = 0; i<result.length; i++) {                    if(Character.isDigit(source[i])) {                        result[j++] = source[i];                    }                }                                if(offs<columns)                    super.insertString(offs, new String(result, 0, j), a);            }        }        public void remove(int offs, int len) throws BadLocationException {            super.remove(offs, len);        }    }        public void setTransferMode(boolean transfer){        transfer_mode = transfer;    }    public void keyReleased(KeyEvent e) {      /*       *henbe comment ป้องกันการ transfer อย่างรวดเร็ว       */        if(transfer_mode){            if(this.getText().length()==columns &&                    e.getKeyCode()!=KeyEvent.VK_UP &&  e.getKeyCode()!=KeyEvent.VK_DOWN &&                    e.getKeyCode()!=KeyEvent.VK_LEFT &&  e.getKeyCode()!=KeyEvent.VK_RIGHT &&                    e.getKeyCode()!=KeyEvent.VK_TAB &&  e.getKeyCode()!=KeyEvent.VK_SHIFT                    )                transferFocus();        } else{            if(e.getKeyCode()==KeyEvent.VK_DOWN                    || e.getKeyCode()==KeyEvent.VK_RIGHT                    || e.getKeyCode()==KeyEvent.VK_ENTER)                transferFocus();        }    }    public void keyPressed(KeyEvent e) {    }    public void keyTyped(KeyEvent e) {    }    public void focusGained(FocusEvent e) {        setSelectionStart(0);    }    public void focusLost(FocusEvent e) {    }    public void setColumns(int columns) {        super.setColumns(columns);        this.columns = columns;    }}