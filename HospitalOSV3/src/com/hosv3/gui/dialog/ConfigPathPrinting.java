/* * ConfigPathPrinting.java * * Created on 20 ?????? 2547, 9:29 ?. */package com.hosv3.gui.dialog;import com.hosv3.utility.Constant;import com.hosv3.utility.GuiLang;import com.printing.utility.*;/** * * @author  tong */public class ConfigPathPrinting extends javax.swing.JDialog {    /** Creates new form ConfigPathPrinting */    boolean actionCommand = false;    private String pathPrint;    public ConfigPathPrinting(java.awt.Frame parent, boolean modal) {        super(parent, modal);        initComponents();         GuiLang.setLanguage(this.jPanel1);        GuiLang.setLanguage(jButton2);        GuiLang.setLanguage(jCheckBoxChoosePrinter);        readFile();    }    /** This method is called from within the constructor to     * initialize the form.     * WARNING: Do NOT modify this code. The content of this method is     * always regenerated by the Form Editor.     */    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents    private void initComponents() {        java.awt.GridBagConstraints gridBagConstraints;        jPanel1 = new javax.swing.JPanel();        jTextField1 = new javax.swing.JTextField();        jButton1 = new javax.swing.JButton();        jButton2 = new javax.swing.JButton();        jCheckBoxChoosePrinter = new javax.swing.JCheckBox();        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);        getContentPane().setLayout(new java.awt.GridBagLayout());        jPanel1.setBorder(null);        jPanel1.setLayout(new java.awt.GridBagLayout());        jTextField1.setMinimumSize(new java.awt.Dimension(200, 21));        jTextField1.setPreferredSize(new java.awt.Dimension(200, 21));        gridBagConstraints = new java.awt.GridBagConstraints();        gridBagConstraints.gridx = 0;        gridBagConstraints.gridy = 0;        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;        gridBagConstraints.weightx = 1.0;        gridBagConstraints.insets = new java.awt.Insets(10, 5, 0, 0);        jPanel1.add(jTextField1, gridBagConstraints);        jButton1.setText("...");        jButton1.setMaximumSize(new java.awt.Dimension(24, 24));        jButton1.setMinimumSize(new java.awt.Dimension(24, 24));        jButton1.setPreferredSize(new java.awt.Dimension(24, 24));        jButton1.addActionListener(new java.awt.event.ActionListener() {            public void actionPerformed(java.awt.event.ActionEvent evt) {                jButton1ActionPerformed(evt);            }        });        gridBagConstraints = new java.awt.GridBagConstraints();        gridBagConstraints.gridx = 1;        gridBagConstraints.gridy = 0;        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;        gridBagConstraints.insets = new java.awt.Insets(10, 7, 0, 0);        jPanel1.add(jButton1, gridBagConstraints);        jButton2.setText("OK");        jButton2.addActionListener(new java.awt.event.ActionListener() {            public void actionPerformed(java.awt.event.ActionEvent evt) {                jButton2ActionPerformed(evt);            }        });        gridBagConstraints = new java.awt.GridBagConstraints();        gridBagConstraints.gridx = 0;        gridBagConstraints.gridy = 2;        gridBagConstraints.gridwidth = java.awt.GridBagConstraints.REMAINDER;        gridBagConstraints.insets = new java.awt.Insets(0, 0, 2, 0);        jPanel1.add(jButton2, gridBagConstraints);        jCheckBoxChoosePrinter.setText("ต้องการเลือกเครื่องพิมพ์");        gridBagConstraints = new java.awt.GridBagConstraints();        gridBagConstraints.gridx = 0;        gridBagConstraints.gridy = 1;        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;        gridBagConstraints.insets = new java.awt.Insets(0, 5, 0, 0);        jPanel1.add(jCheckBoxChoosePrinter, gridBagConstraints);        gridBagConstraints = new java.awt.GridBagConstraints();        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;        gridBagConstraints.weightx = 1.0;        gridBagConstraints.weighty = 1.0;        getContentPane().add(jPanel1, gridBagConstraints);        pack();    }// </editor-fold>//GEN-END:initComponents    private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton2ActionPerformed        if(writeFile())            dispose();    }//GEN-LAST:event_jButton2ActionPerformed    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton1ActionPerformed        showChooseFile();    }//GEN-LAST:event_jButton1ActionPerformed    public boolean writeFile()    {        pathPrint = jTextField1.getText();        java.io.File f = new java.io.File(pathPrint);        if( !f.isDirectory()){            Constant.println("Directory error ");            return false;        }        if(this.jCheckBoxChoosePrinter.isSelected())            pathPrint = "1;"+pathPrint;        else            pathPrint = "0;"+pathPrint;        ReadWriteFileConfig.WriteFile(pathPrint, ".printpath.cfg");        return true;    }    public void readFile()    {        Constant.println("Read File :");        java.io.File file = new java.io.File(".printpath.cfg");        if(file.exists())        {            String data = ReadWriteFileConfig.ReadFile(".printpath.cfg");            if(data.trim().length()>1)            {                String data1[] = data.split(";");                if(data1.length == 2)                {                    this.jTextField1.setText(data1[1]);                    pathPrint = jTextField1.getText();                    if(data1[0].equalsIgnoreCase("1"))                    {                        this.jCheckBoxChoosePrinter.setSelected(true);                    }                    else                    {                        this.jCheckBoxChoosePrinter.setSelected(false);                    }                }            }        }    }    public void showChooseFile()    {        javax.swing.JFileChooser jcc = new javax.swing.JFileChooser();        jcc.setFileSelectionMode(jcc.DIRECTORIES_ONLY);        java.io.File f = new java.io.File(this.jTextField1.getText());//?????????? Dialog ??? Path ???????? TextField        int res;        //???๕??????? TextField ???????????????        if(this.jTextField1.getText().length() != 0)        {               //?????????? Diractory ????????            if(f.isDirectory())            {   //?? ?? Set Path ????????w???????                jcc.setSelectedFile(f);            }           }        res = jcc.showDialog(this,"Choose");        if(res==jcc.APPROVE_OPTION)            f = jcc.getSelectedFile();            this.jTextField1.setText(f.getPath());        pathPrint = f.getPath()+ "/";        f=null;        jcc=null;    }    public static boolean showDialog(javax.swing.JFrame frm)    {          ConfigPathPrinting dlg = new ConfigPathPrinting(frm,true);        dlg.setTitle("เลือก Path ของงานพิมพ์");        java.awt.Toolkit thekit = dlg.getToolkit();        java.awt.Dimension screenSize = thekit.getDefaultToolkit().getScreenSize();           dlg.setLocation((screenSize.width-dlg.getSize().width)/2, (screenSize.height-dlg.getSize().height)/2);        dlg.setVisible(true);        if(dlg.actionCommand)        {            return true;        }        return false;    }      /**     * @param args the command line arguments     */        // Variables declaration - do not modify//GEN-BEGIN:variables    private javax.swing.JButton jButton1;    private javax.swing.JButton jButton2;    private javax.swing.JCheckBox jCheckBoxChoosePrinter;    private javax.swing.JPanel jPanel1;    private javax.swing.JTextField jTextField1;    // End of variables declaration//GEN-END:variables}