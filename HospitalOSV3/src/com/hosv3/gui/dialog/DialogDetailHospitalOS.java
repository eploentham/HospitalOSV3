/*
 * DialogDetailHospitalOS.java
 *
 * 
 */

package com.hosv3.gui.dialog;



import java.util.*;
import java.awt.*;

import com.hosv3.object.*; 
import com.hosv3.utility.*;
import com.hosv3.control.*; 
import com.hosv3.utility.connection.*;
//import com.hosv3.gui.panel.setup.*;
//import com.hosv3.gui.panel.transaction.*;

import com.hospital_os.object.*;  
import com.hosv3.utility.Constant;
import com.hospital_os.usecase.connection.ModuleInfTool;



/**
 *
 * @author  tong
 */
public class DialogDetailHospitalOS  extends javax.swing.JDialog
{
    Vector theModuleV = null;
    SystemControl theSystemControl;
    SetupControl theSetupControl;
    LookupControl theLookupControl;
    HosObject theHO;
    /** Creates new form FrameAbout */
    public DialogDetailHospitalOS(HosControl hc, UpdateStatus us)
    {
        super(us.getJFrame(),true);
         theHO = hc.theHO;
         theSystemControl = hc.theSystemControl;
         theSetupControl = hc.theSetupControl;
         theLookupControl = hc.theLookupControl;
         //setIconImage(us.getJFrame().getIconImage());
         initComponents();
         setDialog();
         setResizable(false);
         this.getRootPane().setDefaultButton(this.jButtonClose);
         setLanguage("null");
         getData();
         getData1();
    }
    
    
    
    
    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    // <editor-fold defaultstate="collapsed" desc=" Generated Code ">//GEN-BEGIN:initComponents
    private void initComponents() {
        java.awt.GridBagConstraints gridBagConstraints;

        jPanel1 = new javax.swing.JPanel();
        jPanel3 = new javax.swing.JPanel();
        jLabel2 = new javax.swing.JLabel();
        jLabelAppCode = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();
        jLabelDBCode = new javax.swing.JLabel();
        jLabel6 = new javax.swing.JLabel();
        jLabelUpdateDate = new javax.swing.JLabel();
        jScrollPane1 = new javax.swing.JScrollPane();
        jTextAreaHospital = new javax.swing.JTextArea();
        jSeparator1 = new javax.swing.JSeparator();
        jLabel1 = new javax.swing.JLabel();
        jLabel5 = new javax.swing.JLabel();
        jPanel2 = new javax.swing.JPanel();
        jButtonClose = new javax.swing.JButton();
        jLabel3 = new javax.swing.JLabel();
        jLabel7 = new javax.swing.JLabel();

        getContentPane().setLayout(new java.awt.GridBagLayout());

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        setTitle("Hospital OS : Community Edition");
        addWindowListener(new java.awt.event.WindowAdapter() {
            public void windowClosing(java.awt.event.WindowEvent evt) {
                exitForm(evt);
            }
        });

        jPanel1.setLayout(new java.awt.GridBagLayout());

        jPanel3.setLayout(new java.awt.GridBagLayout());

        jLabel2.setText("APP_CODE");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 3;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(12, 0, 0, 0);
        jPanel3.add(jLabel2, gridBagConstraints);

        jLabelAppCode.setText("2.00.00");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 3;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(12, 12, 0, 0);
        jPanel3.add(jLabelAppCode, gridBagConstraints);

        jLabel4.setText("DB_CODE");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 4;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(2, 0, 0, 0);
        jPanel3.add(jLabel4, gridBagConstraints);

        jLabelDBCode.setText("2.00.00");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 4;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(2, 12, 0, 0);
        jPanel3.add(jLabelDBCode, gridBagConstraints);

        jLabel6.setText("UPDATE_DATE_COL");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 5;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(2, 0, 0, 0);
        jPanel3.add(jLabel6, gridBagConstraints);

        jLabelUpdateDate.setText("01/01/2547,09:00:00");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 5;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(2, 12, 0, 0);
        jPanel3.add(jLabelUpdateDate, gridBagConstraints);

        jTextAreaHospital.setEditable(false);
        jTextAreaHospital.setLineWrap(true);
        jTextAreaHospital.setBorder(javax.swing.BorderFactory.createEmptyBorder(1, 1, 1, 1));
        jScrollPane1.setViewportView(jTextAreaHospital);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 6;
        gridBagConstraints.gridwidth = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(5, 0, 0, 0);
        jPanel3.add(jScrollPane1, gridBagConstraints);

        jSeparator1.setPreferredSize(new java.awt.Dimension(0, 1));
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.gridwidth = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(3, 0, 0, 0);
        jPanel3.add(jSeparator1, gridBagConstraints);

        jLabel1.setIcon(new javax.swing.ImageIcon(getClass().getResource("/com/hospital_os/images/title.gif")));
        jLabel1.setToolTipText("Hospital OS Community Edition");
        jLabel1.setBorder(javax.swing.BorderFactory.createEtchedBorder(new java.awt.Color(255, 255, 255), new java.awt.Color(51, 51, 51)));
        jLabel1.setMaximumSize(new java.awt.Dimension(304, 54));
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridwidth = 2;
        jPanel3.add(jLabel1, gridBagConstraints);

        jLabel5.setFont(new java.awt.Font("MS Sans Serif", 1, 11));
        jLabel5.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel5.setText("http://www.hospital-os.com");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.gridwidth = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        jPanel3.add(jLabel5, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        jPanel1.add(jPanel3, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(12, 12, 0, 11);
        getContentPane().add(jPanel1, gridBagConstraints);

        jPanel2.setLayout(new java.awt.GridBagLayout());

        jButtonClose.setText("CLOSE");
        jButtonClose.setMargin(new java.awt.Insets(0, 0, 0, 0));
        jButtonClose.setMaximumSize(new java.awt.Dimension(60, 24));
        jButtonClose.setMinimumSize(new java.awt.Dimension(60, 24));
        jButtonClose.setPreferredSize(new java.awt.Dimension(60, 24));
        jButtonClose.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonCloseActionPerformed(evt);
            }
        });

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.SOUTHEAST;
        gridBagConstraints.weightx = 1.0;
        jPanel2.add(jButtonClose, gridBagConstraints);

        jLabel3.setText("\u0e2a\u0e2d\u0e1a\u0e16\u0e32\u0e21\u0e1b\u0e31\u0e0d\u0e2b\u0e32\u0e42\u0e1b\u0e23\u0e41\u0e01\u0e23\u0e21 \u0e17\u0e35\u0e48");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        jPanel2.add(jLabel3, gridBagConstraints);

        jLabel7.setText("e-mail: support@hospital-os.com,\u0e42\u0e17\u0e23 :066820455");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        jPanel2.add(jLabel7, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.SOUTHWEST;
        gridBagConstraints.insets = new java.awt.Insets(17, 12, 11, 11);
        getContentPane().add(jPanel2, gridBagConstraints);

        java.awt.Dimension screenSize = java.awt.Toolkit.getDefaultToolkit().getScreenSize();
        setBounds((screenSize.width-438)/2, (screenSize.height-444)/2, 438, 444);
    }// </editor-fold>//GEN-END:initComponents
 
    private void jButtonCloseActionPerformed(java.awt.event.ActionEvent evt)//GEN-FIRST:event_jButtonCloseActionPerformed
    {//GEN-HEADEREND:event_jButtonCloseActionPerformed
        dispose();
    }//GEN-LAST:event_jButtonCloseActionPerformed
    
    public void getData1()
    {
        Version version = theHO.theVersion;
        if(version != null)
        {
            this.jLabelAppCode.setText(version.app_code);
            this.jLabelDBCode.setText(version.db_code);
            this.jLabelUpdateDate.setText(DateUtil.getDateToString(DateUtil.getDateFromText(version.update_time),true));
        }
    }
    
    public void getData()
    {
        Site site = new Site();
        site = theLookupControl.readSite();
        String data = new String();
        
        String changwat = new String();
        String tambon = new String();
        String amphor = new String();
        
        changwat = this.theSetupControl.readAddressByFullname(site.changwat);
        tambon = this.theSetupControl.readAddressByFullname(site.tambon);
        amphor = this.theSetupControl.readAddressByFullname(site.amphor);
        if(site != null)
        {
            data = site.off_id + " " + site.off_name + "\n------------------------------------\n";
            data = data + site.full_name + "\nที่อยู่ " +site.address + " หมู่ที่ "+ site.village + " ";
            data = data + "ตำบล " + tambon + " \nอำเภอ " +amphor + "  จังหวัด "+ changwat + " \n" + site.postcode;
            this.jTextAreaHospital.setText(data);
        }
        changwat = null;
        tambon = null;
        amphor = null;
        site = null;
    }
    
    private void setDialog()
    {
        Toolkit thekit = getToolkit();
        Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
        
        setLocation((screenSize.width-getSize().width)/2, (screenSize.height-getSize().height)/2);
    }
    
    public void showDialog(Vector v)
    {
        if(theModuleV==null)
        {
            theModuleV = v;
            String version_string = "Module Version ";
            for(int i=0;i<theModuleV.size();i++){
                try{
                    ModuleInfTool mi = (ModuleInfTool)theModuleV.get(i);
                    if(mi!=null){
                        Version version = (Version)mi.getObjectVersion();
                        String module_name = mi.getClass().toString(); 
                        module_name = "\n   " + module_name.substring(module_name.lastIndexOf('.')+1);
                        if(version!=null)
                            module_name =  module_name + "    "  + version.app_code;
                        version_string = version_string + module_name;
                    }
                }
                catch(Exception e){
                    e.printStackTrace(Constant.getPrintStream());
                }
            }
            this.addText(version_string);
        }
        this.setVisible(true);
    }
    public void addText(String str){
        String old_str = this.jTextAreaHospital.getText();
        this.jTextAreaHospital.setText(old_str + "\n\n" + str);
    }
    /** Exit the Application */
    private void exitForm(java.awt.event.WindowEvent evt)
    {//GEN-FIRST:event_exitForm
        dispose();
    }//GEN-LAST:event_exitForm
        
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton jButtonClose;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JLabel jLabelAppCode;
    private javax.swing.JLabel jLabelDBCode;
    private javax.swing.JLabel jLabelUpdateDate;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JSeparator jSeparator1;
    private javax.swing.JTextArea jTextAreaHospital;
    // End of variables declaration//GEN-END:variables
    public void setLanguage(String msg)
    {
        GuiLang.setLanguage(jLabel2);
	GuiLang.setLanguage(jButtonClose);
	GuiLang.setLanguage(jLabel4);
	GuiLang.setLanguage(jLabel6);
	GuiLang.setLanguage(jLabel1);
	GuiLang.setLanguage(jLabel5);
	GuiLang.setLanguage(jLabel3);
    }
    
}
