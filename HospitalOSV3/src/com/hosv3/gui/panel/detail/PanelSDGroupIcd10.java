/*
 * PanelSDGroupIcd10.java
 *
 * Created on April 20, 2009, 3:14 PM
 */

package com.hosv3.gui.panel.detail;

import com.hospital_os.object.Group504;
import com.hospital_os.object.Group505;
import com.hospital_os.object.Group506;
import com.hospital_os.object.GroupChronic;
import com.hospital_os.object.GroupIcd10;
import com.hospital_os.usecase.connection.Persistent;
import com.hospital_os.utility.ComboboxModel;
import com.hosv3.utility.Constant;
import com.hospital_os.utility.Gutil;
import com.hosv3.control.HosControl;
import com.hosv3.control.LookupControl;
import com.hosv3.control.SetupControl;
import com.hosv3.gui.component.PanelSetupImp;
import com.hosv3.utility.GuiLang;
import com.hosv3.utility.connection.UpdateStatus;
import java.util.Vector;

/**
 *
 * @author  Administrator
 */
public class PanelSDGroupIcd10 extends javax.swing.JPanel  implements PanelSetupImp{
    UpdateStatus theUS;
    SetupControl theSetupControl;
    LookupControl theLookupControl;
    private GroupIcd10 theGroupIcd10;
    Vector vGroupIcd10;
    int offset = 24;
    int next = 0;
    int prev = 0;
    int saved = 0; // 0 คือ ไม่สามารถ insertได้ 1 คือ insert ได้
    String[] col = {"icd","504","505","506","chronic",GuiLang.setLanguage("disease")};
    public PanelSDGroupIcd10() 
    {
        initComponents();
        setLanguage(); 
    }
    public PanelSDGroupIcd10(HosControl hc,UpdateStatus us){
        initComponents();
        setLanguage();        
		setControl(hc,us);
		//jTable1.setGuiMode(true);
    }    /////////////////////Use this for decrease memory usage
    
    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {
        java.awt.GridBagConstraints gridBagConstraints;

        defaultFont1 = new com.hospital_os.gui.font.DefaultFont();
        jPanel2 = new javax.swing.JPanel();
        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();
        jLabel5 = new javax.swing.JLabel();
        jLabel6 = new javax.swing.JLabel();
        jLabel7 = new javax.swing.JLabel();
        jTextFieldIcdCode = new javax.swing.JTextField();
        jTextFieldOther = new javax.swing.JTextField();
        jComboBoxGroup504 = new javax.swing.JComboBox();
        jComboBoxGroup505 = new javax.swing.JComboBox();
        jComboBoxGroup506 = new javax.swing.JComboBox();
        jComboBoxGroupChronic = new javax.swing.JComboBox();
        jLabel8 = new javax.swing.JLabel();
        jComboBoxGeneralDisease = new javax.swing.JComboBox();

        setLayout(new java.awt.GridBagLayout());

        jPanel2.setMinimumSize(new java.awt.Dimension(300, 140));
        jPanel2.setPreferredSize(new java.awt.Dimension(300, 320));
        jPanel2.setLayout(new java.awt.GridBagLayout());

        jLabel1.setFont(defaultFont1);
        jLabel1.setText("ICD-10");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(5, 5, 2, 5);
        jPanel2.add(jLabel1, gridBagConstraints);

        jLabel2.setFont(defaultFont1);
        jLabel2.setText("Group 504");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(2, 5, 2, 5);
        jPanel2.add(jLabel2, gridBagConstraints);

        jLabel4.setFont(defaultFont1);
        jLabel4.setText("Group 505");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 4;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(2, 5, 2, 5);
        jPanel2.add(jLabel4, gridBagConstraints);

        jLabel5.setFont(defaultFont1);
        jLabel5.setText("Group 506");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 6;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(2, 5, 2, 5);
        jPanel2.add(jLabel5, gridBagConstraints);

        jLabel6.setFont(defaultFont1);
        jLabel6.setText("Group chronic");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 8;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(2, 5, 2, 5);
        jPanel2.add(jLabel6, gridBagConstraints);

        jLabel7.setFont(defaultFont1);
        jLabel7.setText("Other");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 12;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(2, 5, 2, 5);
        jPanel2.add(jLabel7, gridBagConstraints);

        jTextFieldIcdCode.setFont(defaultFont1);
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(5, 5, 2, 5);
        jPanel2.add(jTextFieldIcdCode, gridBagConstraints);

        jTextFieldOther.setFont(defaultFont1);
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 13;
        gridBagConstraints.gridwidth = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(2, 5, 2, 5);
        jPanel2.add(jTextFieldOther, gridBagConstraints);

        jComboBoxGroup504.setFont(defaultFont1);
        jComboBoxGroup504.setMinimumSize(new java.awt.Dimension(150, 24));
        jComboBoxGroup504.setPreferredSize(new java.awt.Dimension(150, 24));
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 3;
        gridBagConstraints.gridwidth = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(2, 5, 2, 5);
        jPanel2.add(jComboBoxGroup504, gridBagConstraints);

        jComboBoxGroup505.setFont(defaultFont1);
        jComboBoxGroup505.setMinimumSize(new java.awt.Dimension(150, 24));
        jComboBoxGroup505.setPreferredSize(new java.awt.Dimension(150, 24));
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 5;
        gridBagConstraints.gridwidth = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(2, 5, 2, 5);
        jPanel2.add(jComboBoxGroup505, gridBagConstraints);

        jComboBoxGroup506.setFont(defaultFont1);
        jComboBoxGroup506.setMinimumSize(new java.awt.Dimension(150, 24));
        jComboBoxGroup506.setPreferredSize(new java.awt.Dimension(150, 24));
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 7;
        gridBagConstraints.gridwidth = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(2, 5, 2, 5);
        jPanel2.add(jComboBoxGroup506, gridBagConstraints);

        jComboBoxGroupChronic.setFont(defaultFont1);
        jComboBoxGroupChronic.setMinimumSize(new java.awt.Dimension(150, 24));
        jComboBoxGroupChronic.setPreferredSize(new java.awt.Dimension(150, 24));
        jComboBoxGroupChronic.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jComboBoxGroupChronicMouseClicked(evt);
            }
            public void mousePressed(java.awt.event.MouseEvent evt) {
                jComboBoxGroupChronicMousePressed(evt);
            }
        });
        jComboBoxGroupChronic.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jComboBoxGroupChronicActionPerformed(evt);
            }
        });
        jComboBoxGroupChronic.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                jComboBoxGroupChronicFocusGained(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 9;
        gridBagConstraints.gridwidth = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(2, 5, 2, 5);
        jPanel2.add(jComboBoxGroupChronic, gridBagConstraints);

        jLabel8.setFont(defaultFont1);
        jLabel8.setText("กลุ่มโรคทั่วไป");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 10;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(2, 5, 0, 0);
        jPanel2.add(jLabel8, gridBagConstraints);

        jComboBoxGeneralDisease.setFont(defaultFont1);
        jComboBoxGeneralDisease.setMinimumSize(new java.awt.Dimension(26, 24));
        jComboBoxGeneralDisease.setPreferredSize(new java.awt.Dimension(26, 24));
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 11;
        gridBagConstraints.gridwidth = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.insets = new java.awt.Insets(2, 5, 0, 5);
        jPanel2.add(jComboBoxGeneralDisease, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 1.0;
        add(jPanel2, gridBagConstraints);
    }// </editor-fold>//GEN-END:initComponents

    private void jComboBoxGroupChronicActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jComboBoxGroupChronicActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jComboBoxGroupChronicActionPerformed

    private void jComboBoxGroupChronicFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_jComboBoxGroupChronicFocusGained
        // TODO add your handling code here:
        //        setupLookup();
    }//GEN-LAST:event_jComboBoxGroupChronicFocusGained

    private void jComboBoxGroupChronicMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jComboBoxGroupChronicMouseClicked
        // TODO add your handling code here:
    }//GEN-LAST:event_jComboBoxGroupChronicMouseClicked

    private void jComboBoxGroupChronicMousePressed(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jComboBoxGroupChronicMousePressed
        // TODO add your handling code here:
    }//GEN-LAST:event_jComboBoxGroupChronicMousePressed
    
    
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private com.hospital_os.gui.font.DefaultFont defaultFont1;
    private javax.swing.JComboBox jComboBoxGeneralDisease;
    private javax.swing.JComboBox jComboBoxGroup504;
    private javax.swing.JComboBox jComboBoxGroup505;
    private javax.swing.JComboBox jComboBoxGroup506;
    private javax.swing.JComboBox jComboBoxGroupChronic;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JTextField jTextFieldIcdCode;
    private javax.swing.JTextField jTextFieldOther;
    // End of variables declaration//GEN-END:variables

    public void clearAll() {
        this.setTheGroupIcd10(new GroupIcd10());
    }

    public Persistent getXPer() {
        return this.getTheGroupIcd10();
    }

    public void setXPer(Persistent x) {
        this.setTheGroupIcd10((GroupIcd10)x);
    }

    public void setLanguage() {
       
        GuiLang.setLanguage(jLabel1);        
        GuiLang.setLanguage(jLabel2);
        GuiLang.setLanguage(jLabel4);
        GuiLang.setLanguage(jLabel5);
        //GuiLang.setLanguage(jButtonSave);
        GuiLang.setLanguage(jLabel6);
        GuiLang.setLanguage(jLabel7);
        GuiLang.setLanguage(jLabel8);
    }

    public void setControl(HosControl hc, UpdateStatus us) {
         theUS = us;
        theSetupControl = hc.theSetupControl;
        theLookupControl = hc.theLookupControl;
        hc.theHS.theSetupSubject.addpanelrefrash(this);
        hc.theHS.theSetupSubject.addForLiftAttach(this);        
        setupLookup();
        setEnabled();
    }

    public void setEnabled()
    {   
    }
    
    public void setupLookup() {
        ComboboxModel.initComboBox(jComboBoxGroup504,theLookupControl.listGroup504());
        ComboboxModel.initComboBox(jComboBoxGroup505,theLookupControl.listGroup505());
        ComboboxModel.initComboBox(jComboBoxGroup506,theLookupControl.listGroup506());
        ComboboxModel.initComboBox(jComboBoxGroupChronic,theLookupControl.listGroupChronic());
//        ComboboxModel.initComboBox(jComboBoxGroupChronic,theLookupControl.listGroupChronic2());
        ComboboxModel.initComboBox(jComboBoxGeneralDisease,theLookupControl.listDisease());
    }

  public boolean deleteXPer(Persistent x) {
        return (this.theSetupControl.deleteGroupIcd10((GroupIcd10)x)>0);
    }

    public boolean saveXPer(Persistent x) {
      return (this.theSetupControl.saveGroupIcd10((GroupIcd10)x)>0);
    }

    public Vector listXPer(String key, String active, int offset) {
        return theSetupControl.listGroupIcd10All(key);
    }

    public boolean isActiveVisible() {
        return false;
    }

    public boolean isStartVisible() {
        return false;
    }

    
     public static String TITLE = Constant.getTextBundle("รายการกลุ่ม ICD 10");
    public String getTitle() {
        return TITLE;
    }

    public GroupIcd10 getTheGroupIcd10() {
        Group504 g4 = theLookupControl.readGroup504ById(Gutil.getGuiData(this.jComboBoxGroup504));
        theGroupIcd10.group504= g4.group_504_id;
        theGroupIcd10.group_504_id = g4.getObjectId();
        Group505 g5 = theLookupControl.readGroup505ById(Gutil.getGuiData(this.jComboBoxGroup505));
        theGroupIcd10.group505 = g5.group_505_id;
        theGroupIcd10.group_505_id = g5.getObjectId();
        Group506 g6 = theLookupControl.readGroup506ById(Gutil.getGuiData(this.jComboBoxGroup506));
        theGroupIcd10.group506 = g6.group_506_id;
        theGroupIcd10.group_506_id = g6.getObjectId();
        
        theGroupIcd10.icdcode = jTextFieldIcdCode.getText();
        theGroupIcd10.other = jTextFieldOther.getText();
        GroupChronic gc = theSetupControl.listGroupChronicByPk(Gutil.getGuiData(jComboBoxGroupChronic));
        theGroupIcd10.group_chronic_id = Gutil.getGuiData(jComboBoxGroupChronic);
        theGroupIcd10.groupchronic = gc.group_chronic_id;
        theGroupIcd10.group_disease = Gutil.getGuiData(jComboBoxGeneralDisease);//amp:18/04/2549     
        return theGroupIcd10;
    }

    public void setTheGroupIcd10(GroupIcd10 item) {
        theGroupIcd10 = item;
         jTextFieldIcdCode.setEnabled(theGroupIcd10.icdcode.equals(""));
       jTextFieldIcdCode.setText(theGroupIcd10.icdcode);
       jTextFieldOther.setText(theGroupIcd10.other);
       ComboboxModel.setCodeComboBox(jComboBoxGroup504,theGroupIcd10.group_504_id);
       ComboboxModel.setCodeComboBox(jComboBoxGroup505,theGroupIcd10.group_505_id);
       ComboboxModel.setCodeComboBox(jComboBoxGroup506,theGroupIcd10.group_506_id);
       if(theGroupIcd10.group_chronic_id.equals(""))
       {
           ComboboxModel.setCodeComboBox(jComboBoxGroupChronic, theGroupIcd10.NA_CHRONIC);
       }
       else
       {
           ComboboxModel.setCodeComboBox(jComboBoxGroupChronic, theGroupIcd10.group_chronic_id);
       }
       ComboboxModel.setCodeComboBox(jComboBoxGeneralDisease,theGroupIcd10.group_disease);
    }
    
        

}
