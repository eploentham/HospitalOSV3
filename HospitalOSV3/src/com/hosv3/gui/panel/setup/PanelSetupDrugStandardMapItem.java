/*
 * PanelSetupDrugStandardMapItem.java
 *
 * Created on 14 มีนาคม 2549, 18:20 น.
 */

package com.hosv3.gui.panel.setup;

import java.awt.event.*;
import java.util.*;
import com.hosv3.control.*;
import com.hosv3.utility.connection.*;
import com.hosv3.utility.GuiLang;
import com.hospital_os.utility.*;
import com.hospital_os.object.*;
import javax.swing.ListSelectionModel;

/**
 *
 * @author  amp
 */
public class PanelSetupDrugStandardMapItem extends javax.swing.JPanel
{
    HosControl theHC;
    UpdateStatus theUS;    
        
    private Vector vDrugStandard;
    private Vector vItem;    
    private Vector vMap;
    
    private DrugStandard theDrugStandard;
    private DrugStandardMapItem theDrugStandardMapItem;
    
    /** Creates new form PanelSetupDrugStandardMapItem */
    public PanelSetupDrugStandardMapItem(HosControl hc,UpdateStatus us)
    {
        initComponents();
        setLanguage();
	setControl(hc,us);
	jTableDrugStandard.setGuiMode(true);
        jTableItem.setGuiMode(true);
        jTableMap.setGuiMode(true);
        jTableDrugStandard.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
    }
    public void setControl(HosControl hc,UpdateStatus us)
    {
        theHC = hc;
        theUS = us;
    }
    
    /**
     *@Author: amp
     *@date: 15/03/2549
     *@see : จัดการเกี่ยวกับภาษา    
     */
    private void setLanguage()
    {
        GuiLang.setLanguage(jLabel1);
        GuiLang.setLanguage(jLabel2);
        GuiLang.setLanguage(jLabel3);
        GuiLang.setLanguage(jLabel4);
        GuiLang.setLanguage(jLabel5);
        GuiLang.setLanguage(jPanel2);
        GuiLang.setLanguage(jPanel4);
        GuiLang.setLanguage(jPanel5);        
        GuiLang.setLanguage(jButtonSave);
        GuiLang.setLanguage(jCheckBoxCheckMap);
    }
    
    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    // <editor-fold defaultstate="collapsed" desc=" Generated Code ">//GEN-BEGIN:initComponents
    private void initComponents() {
        java.awt.GridBagConstraints gridBagConstraints;

        defaultFont1 = new com.hospital_os.gui.font.DefaultFont();
        fontFormatTitle1 = new com.hospital_os.gui.font.FontFormatTitle();
        jPanel1 = new javax.swing.JPanel();
        jLabel1 = new javax.swing.JLabel();
        jPanel3 = new javax.swing.JPanel();
        jPanel4 = new javax.swing.JPanel();
        jLabel2 = new javax.swing.JLabel();
        jTextFieldSearchDrugStandard = new javax.swing.JTextField();
        jScrollPane2 = new javax.swing.JScrollPane();
        jTableDrugStandard = new com.hosv3.gui.component.HJTableSort();
        jPanel5 = new javax.swing.JPanel();
        jPanel6 = new javax.swing.JPanel();
        jLabel3 = new javax.swing.JLabel();
        jTextFieldSearchItem = new javax.swing.JTextField();
        jScrollPane3 = new javax.swing.JScrollPane();
        jTableItem = new com.hosv3.gui.component.HJTableSort();
        jPanel8 = new javax.swing.JPanel();
        jLabel4 = new javax.swing.JLabel();
        jLabelDrugStandard = new javax.swing.JLabel();
        jButtonSave = new javax.swing.JButton();
        jPanel2 = new javax.swing.JPanel();
        jLabel5 = new javax.swing.JLabel();
        jTextFieldSearchMap = new javax.swing.JTextField();
        jScrollPane1 = new javax.swing.JScrollPane();
        jTableMap = new com.hosv3.gui.component.HJTableSort();
        jPanel7 = new javax.swing.JPanel();
        jButton4 = new javax.swing.JButton();
        jCheckBoxCheckMap = new javax.swing.JCheckBox();

        setLayout(new java.awt.GridBagLayout());

        jPanel1.setLayout(new java.awt.GridBagLayout());

        jLabel1.setFont(fontFormatTitle1);
        jLabel1.setText("\u0e08\u0e31\u0e1a\u0e04\u0e39\u0e48\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23\u0e15\u0e23\u0e27\u0e08\u0e23\u0e31\u0e01\u0e29\u0e32\u0e01\u0e31\u0e1a\u0e22\u0e32\u0e21\u0e32\u0e15\u0e23\u0e10\u0e32\u0e19");
        jPanel1.add(jLabel1, new java.awt.GridBagConstraints());

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(5, 5, 5, 5);
        add(jPanel1, gridBagConstraints);

        jPanel3.setLayout(new java.awt.GridBagLayout());

        jPanel3.setMinimumSize(new java.awt.Dimension(650, 200));
        jPanel3.setPreferredSize(new java.awt.Dimension(650, 200));
        jPanel4.setLayout(new java.awt.GridBagLayout());

        jPanel4.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "\u0e22\u0e32\u0e21\u0e32\u0e15\u0e23\u0e10\u0e32\u0e19", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, defaultFont1));
        jPanel4.setFont(defaultFont1);
        jPanel4.setMinimumSize(new java.awt.Dimension(350, 200));
        jPanel4.setPreferredSize(new java.awt.Dimension(350, 200));
        jLabel2.setFont(defaultFont1);
        jLabel2.setText("\u0e04\u0e49\u0e19\u0e2b\u0e32");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(0, 3, 2, 0);
        jPanel4.add(jLabel2, gridBagConstraints);

        jTextFieldSearchDrugStandard.setFont(defaultFont1);
        jTextFieldSearchDrugStandard.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jTextFieldSearchDrugStandardKeyReleased(evt);
            }
        });

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 3, 2, 3);
        jPanel4.add(jTextFieldSearchDrugStandard, gridBagConstraints);

        jTableDrugStandard.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {

            }
        ));
        jTableDrugStandard.setFont(defaultFont1);
        jTableDrugStandard.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseReleased(java.awt.event.MouseEvent evt) {
                jTableDrugStandardMouseReleased(evt);
            }
        });

        jScrollPane2.setViewportView(jTableDrugStandard);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.gridwidth = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        jPanel4.add(jScrollPane2, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 2, 2, 2);
        jPanel3.add(jPanel4, gridBagConstraints);

        jPanel5.setLayout(new java.awt.GridBagLayout());

        jPanel5.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23\u0e15\u0e23\u0e27\u0e08\u0e23\u0e31\u0e01\u0e29\u0e32", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, defaultFont1));
        jPanel5.setFont(defaultFont1);
        jPanel5.setMinimumSize(new java.awt.Dimension(300, 200));
        jPanel5.setPreferredSize(new java.awt.Dimension(300, 200));
        jPanel6.setLayout(new java.awt.GridBagLayout());

        jLabel3.setFont(defaultFont1);
        jLabel3.setText("\u0e04\u0e49\u0e19\u0e2b\u0e32");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(0, 3, 0, 0);
        jPanel6.add(jLabel3, gridBagConstraints);

        jTextFieldSearchItem.setFont(defaultFont1);
        jTextFieldSearchItem.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jTextFieldSearchItemKeyReleased(evt);
            }
        });

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 3, 0, 0);
        jPanel6.add(jTextFieldSearchItem, gridBagConstraints);

        jTableItem.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {

            }
        ));
        jTableItem.setFont(defaultFont1);
        jScrollPane3.setViewportView(jTableItem);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.gridwidth = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(3, 0, 0, 0);
        jPanel6.add(jScrollPane3, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        jPanel5.add(jPanel6, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.gridheight = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 2, 2, 2);
        jPanel3.add(jPanel5, gridBagConstraints);

        jPanel8.setLayout(new java.awt.GridBagLayout());

        jLabel4.setFont(defaultFont1);
        jLabel4.setText("\u0e22\u0e32\u0e21\u0e32\u0e15\u0e23\u0e10\u0e32\u0e19 :");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        jPanel8.add(jLabel4, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 3, 0, 0);
        jPanel8.add(jLabelDrugStandard, gridBagConstraints);

        jButtonSave.setFont(defaultFont1);
        jButtonSave.setIcon(new javax.swing.ImageIcon(getClass().getResource("/com/hospital_os/images/Save16.gif")));
        jButtonSave.setMargin(new java.awt.Insets(0, 0, 0, 0));
        jButtonSave.setMaximumSize(new java.awt.Dimension(24, 24));
        jButtonSave.setMinimumSize(new java.awt.Dimension(24, 24));
        jButtonSave.setPreferredSize(new java.awt.Dimension(24, 24));
        jButtonSave.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonSaveActionPerformed(evt);
            }
        });

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 2;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHEAST;
        gridBagConstraints.insets = new java.awt.Insets(3, 0, 3, 3);
        jPanel8.add(jButtonSave, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.SOUTHWEST;
        gridBagConstraints.insets = new java.awt.Insets(0, 2, 2, 2);
        jPanel3.add(jPanel8, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        add(jPanel3, gridBagConstraints);

        jPanel2.setLayout(new java.awt.GridBagLayout());

        jPanel2.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "\u0e1c\u0e25\u0e01\u0e32\u0e23\u0e08\u0e31\u0e1a\u0e04\u0e39\u0e48", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, defaultFont1));
        jPanel2.setFont(defaultFont1);
        jLabel5.setFont(defaultFont1);
        jLabel5.setText("\u0e04\u0e49\u0e19\u0e2b\u0e32");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(3, 5, 0, 0);
        jPanel2.add(jLabel5, gridBagConstraints);

        jTextFieldSearchMap.setFont(defaultFont1);
        jTextFieldSearchMap.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jTextFieldSearchMapKeyReleased(evt);
            }
        });

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(3, 3, 0, 0);
        jPanel2.add(jTextFieldSearchMap, gridBagConstraints);

        jTableMap.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {

            }
        ));
        jTableMap.setFont(defaultFont1);
        jScrollPane1.setViewportView(jTableMap);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.gridwidth = 4;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(2, 0, 0, 0);
        jPanel2.add(jScrollPane1, gridBagConstraints);

        jPanel7.setLayout(new java.awt.GridBagLayout());

        jButton4.setFont(defaultFont1);
        jButton4.setIcon(new javax.swing.ImageIcon(getClass().getResource("/com/hosv3/gui/images/minus16.gif")));
        jButton4.setMargin(new java.awt.Insets(0, 0, 0, 0));
        jButton4.setMaximumSize(new java.awt.Dimension(24, 24));
        jButton4.setMinimumSize(new java.awt.Dimension(24, 24));
        jButton4.setPreferredSize(new java.awt.Dimension(24, 24));
        jButton4.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton4ActionPerformed(evt);
            }
        });

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.SOUTHWEST;
        gridBagConstraints.weighty = 1.0;
        jPanel7.add(jButton4, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 3;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHEAST;
        gridBagConstraints.insets = new java.awt.Insets(3, 3, 0, 5);
        jPanel2.add(jPanel7, gridBagConstraints);

        jCheckBoxCheckMap.setFont(defaultFont1);
        jCheckBoxCheckMap.setSelected(true);
        jCheckBoxCheckMap.setText("\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23\u0e17\u0e35\u0e48\u0e08\u0e31\u0e1a\u0e04\u0e39\u0e48");
        jCheckBoxCheckMap.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jCheckBoxCheckMapActionPerformed(evt);
            }
        });

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 2;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(3, 3, 0, 0);
        jPanel2.add(jCheckBoxCheckMap, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 2, 0, 2);
        add(jPanel2, gridBagConstraints);

    }// </editor-fold>//GEN-END:initComponents

    private void jCheckBoxCheckMapActionPerformed(java.awt.event.ActionEvent evt)//GEN-FIRST:event_jCheckBoxCheckMapActionPerformed
    {//GEN-HEADEREND:event_jCheckBoxCheckMapActionPerformed
        searchMap();
    }//GEN-LAST:event_jCheckBoxCheckMapActionPerformed

    private void jButton4ActionPerformed(java.awt.event.ActionEvent evt)//GEN-FIRST:event_jButton4ActionPerformed
    {//GEN-HEADEREND:event_jButton4ActionPerformed
        //amp:17/03/2549
        int row[] = jTableMap.getSelectedRows();
        theHC.theSetupControl.deleteDrugStandardMapItem(vMap,row);
        searchMap();
    }//GEN-LAST:event_jButton4ActionPerformed

    private void jTextFieldSearchMapKeyReleased(java.awt.event.KeyEvent evt)//GEN-FIRST:event_jTextFieldSearchMapKeyReleased
    {//GEN-HEADEREND:event_jTextFieldSearchMapKeyReleased
        if(evt.getKeyCode() == java.awt.event.KeyEvent.VK_ENTER) searchMap();
        if(evt.getKeyCode() == java.awt.event.KeyEvent.VK_DOWN) jTableMap.requestFocus();
        if(jTextFieldSearchMap.getText().length() > 2) searchMap();
    }//GEN-LAST:event_jTextFieldSearchMapKeyReleased

    private void jButtonSaveActionPerformed(java.awt.event.ActionEvent evt)//GEN-FIRST:event_jButtonSaveActionPerformed
    {//GEN-HEADEREND:event_jButtonSaveActionPerformed
        if("".equals(jLabelDrugStandard.getText()))
        {
            theUS.setStatus("ยังไม่ได้เลือกยามาตรฐาน",UpdateStatus.WARNING);
            return;
        }
        int[] row = jTableItem.getSelectedRows();
        if(row.length==0)
        {   
            theUS.setStatus("ยังไม่ได้เลือกรายการ Item",UpdateStatus.WARNING);
            return;
        }
        Vector vMapTemp = new Vector();
        for(int i=0,size=row.length; i<size; i++)
        {   
            Item item =(Item)vItem.get(row[i]);             
            DrugStandardMapItem drugStandardMapItem = new DrugStandardMapItem();
            drugStandardMapItem.drug_standard_id = this.theDrugStandard.getObjectId();
            drugStandardMapItem.item_id = item.getObjectId();                
            vMapTemp.add(drugStandardMapItem);
        }  
        theHC.theSetupControl.saveDrugStandardMapItem(vMapTemp);
        searchMap();
        prepareGui();
    }//GEN-LAST:event_jButtonSaveActionPerformed

    private void jTextFieldSearchItemKeyReleased(java.awt.event.KeyEvent evt)//GEN-FIRST:event_jTextFieldSearchItemKeyReleased
    {//GEN-HEADEREND:event_jTextFieldSearchItemKeyReleased
        if(evt.getKeyCode() == java.awt.event.KeyEvent.VK_ENTER) searchItemDrug();
        if(evt.getKeyCode() == java.awt.event.KeyEvent.VK_DOWN) jTableItem.requestFocus();
        if(jTextFieldSearchItem.getText().length() > 1) searchItemDrug();
    }//GEN-LAST:event_jTextFieldSearchItemKeyReleased

    private void jTableDrugStandardMouseReleased(java.awt.event.MouseEvent evt)//GEN-FIRST:event_jTableDrugStandardMouseReleased
    {//GEN-HEADEREND:event_jTableDrugStandardMouseReleased
        int row = jTableDrugStandard.getSelectedRow();
        if(row == -1) return;
        theDrugStandard = (DrugStandard)vDrugStandard.get(row);        
        updateOGDrugStandard(theDrugStandard.description);
    }//GEN-LAST:event_jTableDrugStandardMouseReleased

    private void jTextFieldSearchDrugStandardKeyReleased(java.awt.event.KeyEvent evt)//GEN-FIRST:event_jTextFieldSearchDrugStandardKeyReleased
    {//GEN-HEADEREND:event_jTextFieldSearchDrugStandardKeyReleased
        if(evt.getKeyCode() == KeyEvent.VK_DOWN)
        {
            if(jTableDrugStandard.getRowCount()>0)
            {
                jTableDrugStandard.requestFocus();
                jTableDrugStandard.setRowSelectionInterval(0,0);
            }
        }
        if(evt.getKeyCode() == java.awt.event.KeyEvent.VK_ENTER) searchDrugStandard();
        if(this.jTextFieldSearchDrugStandard.getText().length() > 1) searchDrugStandard();
    }//GEN-LAST:event_jTextFieldSearchDrugStandardKeyReleased
    
    private void searchDrugStandard()
    {
        String keyword = jTextFieldSearchDrugStandard.getText();
        vDrugStandard  = theHC.theSetupControl.listDrugStandardByCodeName(keyword,"1");
        setTableDrugStandard(vDrugStandard);
    }
    
    private void setTableDrugStandard(Vector vc)
    {
        TaBleModel tm ;
        String[] column = {GuiLang.setLanguage("รหัส"),GuiLang.setLanguage("ชื่อ")};
        if(vc == null)
        {
            tm = new TaBleModel(column,0);
            jTableDrugStandard.setModel(tm);
            return;
        }
        tm= new TaBleModel(column,vc.size());
        for(int i=0; i<vc.size(); i++)
        {  
            DrugStandard drugStandard = (DrugStandard)vc.get(i);
            tm.setValueAt(drugStandard.number,i,0);
            tm.setValueAt(drugStandard.description,i,1);
        }        
        jTableDrugStandard.setModel(tm);
        jTableDrugStandard.getColumnModel().getColumn(0).setPreferredWidth(65);//รหัส   
        jTableDrugStandard.getColumnModel().getColumn(1).setPreferredWidth(200);//รายละเอียด  
    }   
    
    private void updateOGDrugStandard(String drugStandardDescription)
    {
        jLabelDrugStandard.setText(drugStandardDescription);
    }
    
    private void searchItemDrug()
    {
        String keyword = jTextFieldSearchItem.getText();
        keyword = Gutil.CheckReservedWords(keyword);
        vItem = theHC.theSetupControl.listSearchItem(keyword,3,"1");
        setTableItem(vItem);
    }
    
    private void setTableItem(Vector vc)
    {  
        String[] column = {GuiLang.setLanguage("รหัส"),GuiLang.setLanguage("ชื่อ")};
        TaBleModel tm;
        if(vc != null)
        {           
            tm = new TaBleModel(column,vc.size());
            for(int i=0,size=vc.size(); i<size; i++)
            {  
                Item item = (Item)vc.get(i);
                tm.setValueAt(item.item_id,i,0);
                tm.setValueAt(item.common_name,i,1);
            }
            jTableItem.setModel(tm);
        }
        else
        {
            tm = new TaBleModel(column,0);
            jTableItem.setModel(tm);
        }
        jTableItem.getColumnModel().getColumn(0).setPreferredWidth(100);     
        jTableItem.getColumnModel().getColumn(1).setPreferredWidth(300);        
    }
    
    private void prepareGui()
    {
        jTableItem.clearSelection();
        jTableDrugStandard.clearSelection();
        jLabelDrugStandard.setText("");
    }
    
    private void searchMap()
    {
        String keyword = jTextFieldSearchMap.getText();
        String active = "0";
        if(jCheckBoxCheckMap.isSelected()) 
        {
            active = "1";
        }
        vMap  = theHC.theSetupControl.listDrugStandardMapItem(keyword,active);
        setTableMap(vMap);
    }
    
    private void setTableMap(Vector vc)
    {   
        String[] column = {Constant.getTextBundle("ชื่อรายการตรวจรักษา"),Constant.getTextBundle("ชื่อยามาตรฐาน")};
        TaBleModel tm;
        if(vc != null)
        {           
            tm = new TaBleModel(column,vc.size());
            for(int i=0,size=vc.size(); i<size; i++)
            {  
                DrugStandardMapItem drugStandardMapItem = (DrugStandardMapItem)vc.get(i);
                tm.setValueAt(drugStandardMapItem.item_description,i,0);
                tm.setValueAt(drugStandardMapItem.drug_standard_description,i,1);
            }
            jTableMap.setModel(tm);
        }
        else
        {
            tm = new TaBleModel(column,0);
            jTableMap.setModel(tm);
        }
        jTableMap.getColumnModel().getColumn(0).setPreferredWidth(300);     
        jTableMap.getColumnModel().getColumn(1).setPreferredWidth(300);        
    }
    
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private com.hospital_os.gui.font.DefaultFont defaultFont1;
    private com.hospital_os.gui.font.FontFormatTitle fontFormatTitle1;
    private javax.swing.JButton jButton4;
    private javax.swing.JButton jButtonSave;
    private javax.swing.JCheckBox jCheckBoxCheckMap;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabelDrugStandard;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JPanel jPanel4;
    private javax.swing.JPanel jPanel5;
    private javax.swing.JPanel jPanel6;
    private javax.swing.JPanel jPanel7;
    private javax.swing.JPanel jPanel8;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JScrollPane jScrollPane3;
    private com.hosv3.gui.component.HJTableSort jTableDrugStandard;
    private com.hosv3.gui.component.HJTableSort jTableItem;
    private com.hosv3.gui.component.HJTableSort jTableMap;
    private javax.swing.JTextField jTextFieldSearchDrugStandard;
    private javax.swing.JTextField jTextFieldSearchItem;
    private javax.swing.JTextField jTextFieldSearchMap;
    // End of variables declaration//GEN-END:variables
    
}
