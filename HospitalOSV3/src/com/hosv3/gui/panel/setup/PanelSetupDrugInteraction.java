/*
 * PanelSetupDrugInteraction.java
 *
 * Created on 14 มีนาคม 2549, 18:21 น.
 */

package com.hosv3.gui.panel.setup;

import java.awt.event.*;
import java.util.*;
import javax.swing.*;
import com.hosv3.control.*;
import com.hosv3.utility.connection.*;
import com.hosv3.utility.GuiLang;
import com.hospital_os.utility.*;
import com.hospital_os.object.*;
import com.hospital_os.utility.CelRendererPregnant;

/**
 *
 * @author  amp
 */
public class PanelSetupDrugInteraction extends javax.swing.JPanel
{
    HosControl theHC;
    UpdateStatus theUS;    
    
    private Vector vDrugStandardMain;
//    private Vector vSearchDrugInteraction;
    private Vector vDrugStandardInt;
    private Vector vDrugInteraction;
    
    private DrugStandard theDrugStandard;
    private Hashtable hDrugInteractionOneDetail;
    private DrugInteractionOneDetail theDrugInteractionOneDetail = new DrugInteractionOneDetail();
    
    public final static String CARD_DRUG = "CARD_DRUG";
    public final static String CARD_BLOOD_PRESURE = "CARD_BLOOD_PRESURE";
    public final static String CARD_PREGNANT = "CARD_PREGNANT";
    
    CelRendererPregnant celRendererPregnant = new CelRendererPregnant();
    private int selectdetail = -1;
    
    /** Creates new form PanelSetupDrugInteraction */
    public PanelSetupDrugInteraction(HosControl hc,UpdateStatus us)
    {
        theHC = hc;
        theUS = us;
        initComponents();
        setLanguage(); 
//        this.hidejButtonDelDrugInteraction.setVisible(false);
//        this.hidejScrollPane8.setVisible(false);
        this.hidejButtonAddDrugInteraction.setVisible(false);
        jPanelPressure.setVisible(false);
        jPanel11.setVisible(false);
        jPanel20.setVisible(false);
    }
    
    /**
     *@Author: amp
     *@date: 20/03/2549
     *@see : จัดการเกี่ยวกับภาษา    
     */
    private void setLanguage()
    {
        GuiLang.setLanguage(jLabel1);
        GuiLang.setLanguage(jLabel2);
        GuiLang.setLanguage(jLabel16);
        GuiLang.setLanguage(jLabel17);
        GuiLang.setLanguage(jLabel18);
        GuiLang.setLanguage(jLabel19);
        GuiLang.setLanguage(jLabel20);
        GuiLang.setLanguage(jLabel21);
        GuiLang.setLanguage(jRadioButtonDrug);
        GuiLang.setLanguage(jLabel31);
        GuiLang.setLanguage(jLabel33);
        GuiLang.setLanguage(jRadioButtonPregnant);
        GuiLang.setLanguage(jPanel1);
        GuiLang.setLanguage(jPanel3);
        GuiLang.setLanguage(jPanel21);
        GuiLang.setLanguage(jPanel23);
        GuiLang.setTextBundle(jPanelDrug);
    }
    
    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    // <editor-fold defaultstate="collapsed" desc=" Generated Code ">//GEN-BEGIN:initComponents
    private void initComponents() {
        java.awt.GridBagConstraints gridBagConstraints;

        buttonGroupInteraction = new javax.swing.ButtonGroup();
        defaultFont1 = new com.hospital_os.gui.font.DefaultFont();
        fontFormatTitle1 = new com.hospital_os.gui.font.FontFormatTitle();
        jPanel1 = new javax.swing.JPanel();
        jPanel9 = new javax.swing.JPanel();
        jPanel7 = new javax.swing.JPanel();
        jLabel2 = new javax.swing.JLabel();
        jTextFieldSearchDrugStandard = new javax.swing.JTextField();
        jRadioButtonDrug = new javax.swing.JRadioButton();
        jPanel20 = new javax.swing.JPanel();
        jLabel17 = new javax.swing.JLabel();
        jLabelDrugStandard = new javax.swing.JLabel();
        jScrollPane2 = new javax.swing.JScrollPane();
        jTableDrugStandard = new com.hosv3.gui.component.HJTableSort();
        jPanelPressure = new javax.swing.JPanel();
        jLabel31 = new javax.swing.JLabel();
        doubleTextFieldBloodPresure1 = new com.hospital_os.utility.DoubleTextField();
        jLabel32 = new javax.swing.JLabel();
        doubleTextFieldBloodPresure2 = new com.hospital_os.utility.DoubleTextField();
        jLabel33 = new javax.swing.JLabel();
        jRadioButtonBloodPresure = new javax.swing.JRadioButton();
        jPanel11 = new javax.swing.JPanel();
        jRadioButtonPregnant = new javax.swing.JRadioButton();
        jPanelDrug = new javax.swing.JPanel();
        jPanel21 = new javax.swing.JPanel();
        jScrollPane5 = new javax.swing.JScrollPane();
        jTableSearchDrugInteraction = new com.hosv3.gui.component.HJTableSort();
        hidejButtonAddDrugInteraction = new javax.swing.JButton();
        jLabel18 = new javax.swing.JLabel();
        jTextFieldSearchDrugInteraction = new javax.swing.JTextField();
        jPanel23 = new javax.swing.JPanel();
        jLabel19 = new javax.swing.JLabel();
        jLabel20 = new javax.swing.JLabel();
        jScrollPane14 = new javax.swing.JScrollPane();
        jTextAreaDrugAct = new javax.swing.JTextArea();
        jLabel21 = new javax.swing.JLabel();
        jScrollPane15 = new javax.swing.JScrollPane();
        jTextAreaDrugRepair = new javax.swing.JTextArea();
        integerTextFieldDrugForce = new javax.swing.JTextField();
        jButtonSaveMap = new javax.swing.JButton();
        jPanel3 = new javax.swing.JPanel();
        jPanel5 = new javax.swing.JPanel();
        jScrollPane1 = new javax.swing.JScrollPane();
        jTableMap = new com.hosv3.gui.component.HJTableSort();
        jLabel1 = new javax.swing.JLabel();
        jTextFieldSearchMap = new javax.swing.JTextField();
        jPanel6 = new javax.swing.JPanel();
        jButton1 = new javax.swing.JButton();
        jButtonSaveDrugInteraction = new javax.swing.JButton();
        jLabel16 = new javax.swing.JLabel();

        setLayout(new java.awt.GridBagLayout());

        jPanel1.setLayout(new java.awt.GridBagLayout());

        jPanel1.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "\u0e15\u0e31\u0e49\u0e07\u0e15\u0e49\u0e19", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, defaultFont1));
        jPanel1.setMinimumSize(new java.awt.Dimension(300, 200));
        jPanel1.setPreferredSize(new java.awt.Dimension(300, 200));
        jPanel9.setLayout(new java.awt.GridBagLayout());

        jPanel9.setMinimumSize(new java.awt.Dimension(82, 97));
        jPanel7.setLayout(new java.awt.GridBagLayout());

        jLabel2.setFont(defaultFont1);
        jLabel2.setText("\u0e04\u0e49\u0e19\u0e2b\u0e32");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(0, 3, 0, 0);
        jPanel7.add(jLabel2, gridBagConstraints);

        jTextFieldSearchDrugStandard.setFont(defaultFont1);
        jTextFieldSearchDrugStandard.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                jTextFieldSearchDrugStandardFocusGained(evt);
            }
        });
        jTextFieldSearchDrugStandard.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jTextFieldSearchDrugStandardKeyReleased(evt);
            }
        });

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 2;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 3, 0, 0);
        jPanel7.add(jTextFieldSearchDrugStandard, gridBagConstraints);

        buttonGroupInteraction.add(jRadioButtonDrug);
        jRadioButtonDrug.setFont(defaultFont1);
        jRadioButtonDrug.setSelected(true);
        jRadioButtonDrug.setText("\u0e22\u0e32");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        jPanel7.add(jRadioButtonDrug, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 3, 0, 3);
        jPanel9.add(jPanel7, gridBagConstraints);

        jPanel20.setLayout(new java.awt.GridBagLayout());

        jLabel17.setFont(defaultFont1);
        jLabel17.setText("\u0e22\u0e32\u0e15\u0e31\u0e49\u0e07\u0e15\u0e49\u0e19 :");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        jPanel20.add(jLabel17, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 3, 0, 0);
        jPanel20.add(jLabelDrugStandard, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(3, 3, 3, 3);
        jPanel9.add(jPanel20, gridBagConstraints);

        jTableDrugStandard.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {

            }
        ));
        jTableDrugStandard.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseReleased(java.awt.event.MouseEvent evt) {
                jTableDrugStandardMouseReleased(evt);
            }
        });

        jScrollPane2.setViewportView(jTableDrugStandard);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(5, 0, 0, 0);
        jPanel9.add(jScrollPane2, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        jPanel1.add(jPanel9, gridBagConstraints);

        jPanelPressure.setLayout(new java.awt.GridBagLayout());

        jPanelPressure.setBorder(javax.swing.BorderFactory.createEtchedBorder());
        jLabel31.setFont(defaultFont1);
        jLabel31.setText("\u0e04\u0e27\u0e32\u0e21\u0e14\u0e31\u0e19");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(3, 3, 3, 0);
        jPanelPressure.add(jLabel31, gridBagConstraints);

        doubleTextFieldBloodPresure1.setColumns(3);
        doubleTextFieldBloodPresure1.setHorizontalAlignment(javax.swing.JTextField.RIGHT);
        doubleTextFieldBloodPresure1.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                doubleTextFieldBloodPresure1FocusGained(evt);
            }
        });
        doubleTextFieldBloodPresure1.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                doubleTextFieldBloodPresure1KeyReleased(evt);
            }
        });

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 2;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.insets = new java.awt.Insets(3, 3, 3, 0);
        jPanelPressure.add(doubleTextFieldBloodPresure1, gridBagConstraints);

        jLabel32.setFont(defaultFont1);
        jLabel32.setText("/");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 3;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(3, 3, 3, 0);
        jPanelPressure.add(jLabel32, gridBagConstraints);

        doubleTextFieldBloodPresure2.setColumns(3);
        doubleTextFieldBloodPresure2.setHorizontalAlignment(javax.swing.JTextField.RIGHT);
        doubleTextFieldBloodPresure2.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                doubleTextFieldBloodPresure2FocusGained(evt);
            }
        });

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 4;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.insets = new java.awt.Insets(3, 3, 3, 0);
        jPanelPressure.add(doubleTextFieldBloodPresure2, gridBagConstraints);

        jLabel33.setFont(defaultFont1);
        jLabel33.setText("mmHg");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 5;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(3, 3, 3, 3);
        jPanelPressure.add(jLabel33, gridBagConstraints);

        buttonGroupInteraction.add(jRadioButtonBloodPresure);
        jRadioButtonBloodPresure.setFont(defaultFont1);
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(3, 3, 3, 0);
        jPanelPressure.add(jRadioButtonBloodPresure, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(3, 0, 0, 0);
        jPanel1.add(jPanelPressure, gridBagConstraints);

        jPanel11.setLayout(new java.awt.GridBagLayout());

        jPanel11.setBorder(javax.swing.BorderFactory.createEtchedBorder());
        buttonGroupInteraction.add(jRadioButtonPregnant);
        jRadioButtonPregnant.setFont(defaultFont1);
        jRadioButtonPregnant.setText("\u0e15\u0e31\u0e49\u0e07\u0e04\u0e23\u0e23\u0e20\u0e4c");
        jRadioButtonPregnant.setToolTipText("\u0e44\u0e21\u0e48\u0e40\u0e1b\u0e34\u0e14\u0e43\u0e0a\u0e49\u0e04\u0e38\u0e13\u0e2a\u0e21\u0e1a\u0e31\u0e15\u0e34\u0e19\u0e35\u0e49");
        jRadioButtonPregnant.setEnabled(false);
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 3, 0, 0);
        jPanel11.add(jRadioButtonPregnant, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(3, 0, 0, 0);
        jPanel1.add(jPanel11, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 2, 2, 2);
        add(jPanel1, gridBagConstraints);

        jPanelDrug.setLayout(new java.awt.GridBagLayout());

        jPanelDrug.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "\u0e22\u0e32\u0e17\u0e35\u0e48\u0e21\u0e35\u0e1b\u0e0f\u0e34\u0e01\u0e34\u0e23\u0e34\u0e22\u0e32\u0e14\u0e49\u0e27\u0e22", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, defaultFont1));
        jPanelDrug.setMinimumSize(new java.awt.Dimension(350, 200));
        jPanelDrug.setPreferredSize(new java.awt.Dimension(350, 200));
        jPanel21.setLayout(new java.awt.GridBagLayout());

        jPanel21.setMinimumSize(new java.awt.Dimension(81, 68));
        jTableSearchDrugInteraction.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {

            }
        ));
        jTableSearchDrugInteraction.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jTableSearchDrugInteractionKeyReleased(evt);
            }
        });
        jTableSearchDrugInteraction.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseReleased(java.awt.event.MouseEvent evt) {
                jTableSearchDrugInteractionMouseReleased(evt);
            }
        });

        jScrollPane5.setViewportView(jTableSearchDrugInteraction);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.gridwidth = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(5, 0, 0, 0);
        jPanel21.add(jScrollPane5, gridBagConstraints);

        hidejButtonAddDrugInteraction.setFont(defaultFont1);
        hidejButtonAddDrugInteraction.setIcon(new javax.swing.ImageIcon(getClass().getResource("/com/hosv3/gui/images/plus16.gif")));
        hidejButtonAddDrugInteraction.setMargin(new java.awt.Insets(0, 0, 0, 0));
        hidejButtonAddDrugInteraction.setMaximumSize(new java.awt.Dimension(24, 24));
        hidejButtonAddDrugInteraction.setMinimumSize(new java.awt.Dimension(24, 24));
        hidejButtonAddDrugInteraction.setPreferredSize(new java.awt.Dimension(24, 24));
        hidejButtonAddDrugInteraction.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                hidejButtonAddDrugInteractionActionPerformed(evt);
            }
        });

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 2;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.insets = new java.awt.Insets(3, 3, 0, 0);
        jPanel21.add(hidejButtonAddDrugInteraction, gridBagConstraints);

        jLabel18.setFont(defaultFont1);
        jLabel18.setText("\u0e04\u0e49\u0e19\u0e2b\u0e32");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        jPanel21.add(jLabel18, gridBagConstraints);

        jTextFieldSearchDrugInteraction.setFont(defaultFont1);
        jTextFieldSearchDrugInteraction.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jTextFieldSearchDrugInteractionKeyReleased(evt);
            }
        });

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 3, 0, 0);
        jPanel21.add(jTextFieldSearchDrugInteraction, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.gridheight = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        jPanelDrug.add(jPanel21, gridBagConstraints);

        jPanel23.setLayout(new java.awt.GridBagLayout());

        jPanel23.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "\u0e23\u0e32\u0e22\u0e25\u0e30\u0e40\u0e2d\u0e35\u0e22\u0e14", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, defaultFont1));
        jLabel19.setFont(defaultFont1);
        jLabel19.setText("\u0e23\u0e30\u0e14\u0e31\u0e1a\u0e04\u0e27\u0e32\u0e21\u0e41\u0e23\u0e07");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        jPanel23.add(jLabel19, gridBagConstraints);

        jLabel20.setFont(defaultFont1);
        jLabel20.setText("\u0e1b\u0e0f\u0e34\u0e01\u0e34\u0e23\u0e34\u0e22\u0e32\u0e17\u0e35\u0e48\u0e08\u0e30\u0e40\u0e01\u0e34\u0e14");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(3, 0, 0, 0);
        jPanel23.add(jLabel20, gridBagConstraints);

        jTextAreaDrugAct.setFont(defaultFont1);
        jTextAreaDrugAct.setLineWrap(true);
        jTextAreaDrugAct.setWrapStyleWord(true);
        jTextAreaDrugAct.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusLost(java.awt.event.FocusEvent evt) {
                jTextAreaDrugActFocusLost(evt);
            }
        });

        jScrollPane14.setViewportView(jTextAreaDrugAct);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.gridwidth = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(3, 0, 0, 0);
        jPanel23.add(jScrollPane14, gridBagConstraints);

        jLabel21.setFont(defaultFont1);
        jLabel21.setText("\u0e27\u0e34\u0e18\u0e35\u0e41\u0e01\u0e49\u0e44\u0e02");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 3;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(3, 0, 0, 0);
        jPanel23.add(jLabel21, gridBagConstraints);

        jTextAreaDrugRepair.setFont(defaultFont1);
        jTextAreaDrugRepair.setLineWrap(true);
        jTextAreaDrugRepair.setWrapStyleWord(true);
        jTextAreaDrugRepair.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusLost(java.awt.event.FocusEvent evt) {
                jTextAreaDrugRepairFocusLost(evt);
            }
        });

        jScrollPane15.setViewportView(jTextAreaDrugRepair);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 4;
        gridBagConstraints.gridwidth = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(3, 0, 0, 0);
        jPanel23.add(jScrollPane15, gridBagConstraints);

        integerTextFieldDrugForce.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusLost(java.awt.event.FocusEvent evt) {
                integerTextFieldDrugForceFocusLost(evt);
            }
        });

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 3, 0, 0);
        jPanel23.add(integerTextFieldDrugForce, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 5, 0, 0);
        jPanelDrug.add(jPanel23, gridBagConstraints);

        jButtonSaveMap.setFont(defaultFont1);
        jButtonSaveMap.setIcon(new javax.swing.ImageIcon(getClass().getResource("/com/hospital_os/images/Save16.gif")));
        jButtonSaveMap.setMargin(new java.awt.Insets(0, 0, 0, 0));
        jButtonSaveMap.setMaximumSize(new java.awt.Dimension(24, 24));
        jButtonSaveMap.setMinimumSize(new java.awt.Dimension(24, 24));
        jButtonSaveMap.setPreferredSize(new java.awt.Dimension(24, 24));
        jButtonSaveMap.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonSaveMapActionPerformed(evt);
            }
        });

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.EAST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(3, 3, 3, 3);
        jPanelDrug.add(jButtonSaveMap, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.insets = new java.awt.Insets(0, 2, 2, 2);
        add(jPanelDrug, gridBagConstraints);

        jPanel3.setLayout(new java.awt.GridBagLayout());

        jPanel3.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "\u0e1c\u0e25\u0e01\u0e32\u0e23\u0e08\u0e31\u0e1a\u0e04\u0e39\u0e48", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, defaultFont1));
        jPanel5.setLayout(new java.awt.GridBagLayout());

        jTableMap.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {

            }
        ));
        jTableMap.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jTableMapKeyReleased(evt);
            }
        });
        jTableMap.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseReleased(java.awt.event.MouseEvent evt) {
                jTableMapMouseReleased(evt);
            }
        });

        jScrollPane1.setViewportView(jTableMap);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.gridwidth = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(5, 0, 0, 0);
        jPanel5.add(jScrollPane1, gridBagConstraints);

        jLabel1.setFont(defaultFont1);
        jLabel1.setText("\u0e04\u0e49\u0e19\u0e2b\u0e32");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        jPanel5.add(jLabel1, gridBagConstraints);

        jTextFieldSearchMap.setFont(defaultFont1);
        jTextFieldSearchMap.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jTextFieldSearchMapKeyReleased(evt);
            }
        });

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 3, 0, 0);
        jPanel5.add(jTextFieldSearchMap, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(3, 0, 0, 0);
        jPanel3.add(jPanel5, gridBagConstraints);

        jPanel6.setLayout(new java.awt.GridBagLayout());

        jButton1.setFont(defaultFont1);
        jButton1.setIcon(new javax.swing.ImageIcon(getClass().getResource("/com/hosv3/gui/images/minus16.gif")));
        jButton1.setMargin(new java.awt.Insets(0, 0, 0, 0));
        jButton1.setMaximumSize(new java.awt.Dimension(24, 24));
        jButton1.setMinimumSize(new java.awt.Dimension(24, 24));
        jButton1.setPreferredSize(new java.awt.Dimension(24, 24));
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.anchor = java.awt.GridBagConstraints.SOUTHWEST;
        gridBagConstraints.weighty = 1.0;
        jPanel6.add(jButton1, gridBagConstraints);

        jButtonSaveDrugInteraction.setFont(defaultFont1);
        jButtonSaveDrugInteraction.setIcon(new javax.swing.ImageIcon(getClass().getResource("/com/hospital_os/images/Save16.gif")));
        jButtonSaveDrugInteraction.setMargin(new java.awt.Insets(0, 0, 0, 0));
        jButtonSaveDrugInteraction.setMaximumSize(new java.awt.Dimension(24, 24));
        jButtonSaveDrugInteraction.setMinimumSize(new java.awt.Dimension(24, 24));
        jButtonSaveDrugInteraction.setPreferredSize(new java.awt.Dimension(24, 24));
        jButtonSaveDrugInteraction.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonSaveDrugInteractionActionPerformed(evt);
            }
        });

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.insets = new java.awt.Insets(3, 0, 0, 0);
        jPanel6.add(jButtonSaveDrugInteraction, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.fill = java.awt.GridBagConstraints.VERTICAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(3, 3, 0, 0);
        jPanel3.add(jPanel6, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 3;
        gridBagConstraints.gridwidth = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 2, 2, 2);
        add(jPanel3, gridBagConstraints);

        jLabel16.setFont(fontFormatTitle1);
        jLabel16.setText("\u0e1b\u0e0f\u0e34\u0e01\u0e34\u0e23\u0e34\u0e22\u0e32\u0e01\u0e31\u0e19\u0e02\u0e2d\u0e07\u0e22\u0e32 (\u0e15\u0e32\u0e21\u0e0a\u0e37\u0e48\u0e2d\u0e2a\u0e32\u0e21\u0e31\u0e0d)");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridwidth = 2;
        gridBagConstraints.insets = new java.awt.Insets(5, 5, 5, 5);
        add(jLabel16, gridBagConstraints);

    }// </editor-fold>//GEN-END:initComponents

    private void integerTextFieldDrugForceFocusLost(java.awt.event.FocusEvent evt)//GEN-FIRST:event_integerTextFieldDrugForceFocusLost
    {//GEN-HEADEREND:event_integerTextFieldDrugForceFocusLost
        theDrugInteractionOneDetail.force = integerTextFieldDrugForce.getText();
    }//GEN-LAST:event_integerTextFieldDrugForceFocusLost

    private void jTableSearchDrugInteractionMouseReleased(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jTableSearchDrugInteractionMouseReleased
        hidejButtonAddDrugInteractionActionPerformed(null);
        int row = jTableSearchDrugInteraction.getSelectedRow();
        if(row==-1) return;
        DrugStandard ds = (DrugStandard)vDrugStandardInt.get(row);
        setDrugStandardMainVInteraction(ds.getObjectId());
    }//GEN-LAST:event_jTableSearchDrugInteractionMouseReleased

    private void jTextFieldSearchDrugStandardFocusGained(java.awt.event.FocusEvent evt)//GEN-FIRST:event_jTextFieldSearchDrugStandardFocusGained
    {//GEN-HEADEREND:event_jTextFieldSearchDrugStandardFocusGained
        jRadioButtonDrug.setSelected(true);
    }//GEN-LAST:event_jTextFieldSearchDrugStandardFocusGained

    private void doubleTextFieldBloodPresure2FocusGained(java.awt.event.FocusEvent evt)//GEN-FIRST:event_doubleTextFieldBloodPresure2FocusGained
    {//GEN-HEADEREND:event_doubleTextFieldBloodPresure2FocusGained
        jRadioButtonBloodPresure.setSelected(true);
    }//GEN-LAST:event_doubleTextFieldBloodPresure2FocusGained

    private void doubleTextFieldBloodPresure1FocusGained(java.awt.event.FocusEvent evt)//GEN-FIRST:event_doubleTextFieldBloodPresure1FocusGained
    {//GEN-HEADEREND:event_doubleTextFieldBloodPresure1FocusGained
        jRadioButtonBloodPresure.setSelected(true);
    }//GEN-LAST:event_doubleTextFieldBloodPresure1FocusGained

    private void doubleTextFieldBloodPresure1KeyReleased(java.awt.event.KeyEvent evt)//GEN-FIRST:event_doubleTextFieldBloodPresure1KeyReleased
    {//GEN-HEADEREND:event_doubleTextFieldBloodPresure1KeyReleased
        if(doubleTextFieldBloodPresure1.getText().length()==3)
        {
            doubleTextFieldBloodPresure2.requestFocus();
        }
    }//GEN-LAST:event_doubleTextFieldBloodPresure1KeyReleased

    private void jTableSearchDrugInteractionKeyReleased(java.awt.event.KeyEvent evt)//GEN-FIRST:event_jTableSearchDrugInteractionKeyReleased
    {//GEN-HEADEREND:event_jTableSearchDrugInteractionKeyReleased
//        if(evt.getKeyCode() == KeyEvent.VK_SPACE)
//        {
//            jButtonAddDrugInteractionActionPerformed(null);            
//        }
        
    }//GEN-LAST:event_jTableSearchDrugInteractionKeyReleased

    private void jTextAreaDrugRepairFocusLost(java.awt.event.FocusEvent evt)//GEN-FIRST:event_jTextAreaDrugRepairFocusLost
    {//GEN-HEADEREND:event_jTextAreaDrugRepairFocusLost
        theDrugInteractionOneDetail.repair = jTextAreaDrugRepair.getText();

    }//GEN-LAST:event_jTextAreaDrugRepairFocusLost

    private void jTextAreaDrugActFocusLost(java.awt.event.FocusEvent evt)//GEN-FIRST:event_jTextAreaDrugActFocusLost
    {//GEN-HEADEREND:event_jTextAreaDrugActFocusLost
        theDrugInteractionOneDetail.act = jTextAreaDrugAct.getText();
    }//GEN-LAST:event_jTextAreaDrugActFocusLost

    private void jTableMapKeyReleased(java.awt.event.KeyEvent evt)//GEN-FIRST:event_jTableMapKeyReleased
    {//GEN-HEADEREND:event_jTableMapKeyReleased
        if(evt.getKeyCode() == KeyEvent.VK_ENTER)
        {
            jTableMapMouseReleased(null);
        }
    }//GEN-LAST:event_jTableMapKeyReleased

    private void jTableMapMouseReleased(java.awt.event.MouseEvent evt)//GEN-FIRST:event_jTableMapMouseReleased
    {//GEN-HEADEREND:event_jTableMapMouseReleased
        if(selectdetail > -1 && selectdetail < jTableMap.getRowCount())
        {
            Object ob = jTableMap.getValueAt(selectdetail, 3);
            if(ob instanceof JTextField)
            {
                jTableMap.repaint();
            }
        }
        selectdetail = jTableMap.getSelectedRow();
    }//GEN-LAST:event_jTableMapMouseReleased

    private void jButtonSaveDrugInteractionActionPerformed(java.awt.event.ActionEvent evt)//GEN-FIRST:event_jButtonSaveDrugInteractionActionPerformed
    {//GEN-HEADEREND:event_jButtonSaveDrugInteractionActionPerformed
        for(int i=0; i<jTableMap.getRowCount(); i++)
        {
            DrugInteraction di = (DrugInteraction)vDrugInteraction.get(i);
            di.force = Gutil.CheckReservedWords((String)jTableMap.getValueAt(i,4));
            di.act = Gutil.CheckReservedWords((String)jTableMap.getValueAt(i,5));
            di.repair = Gutil.CheckReservedWords((String)jTableMap.getValueAt(i,6));
        }
        theHC.theSetupControl.saveDrugInteraction(vDrugInteraction);        
    }//GEN-LAST:event_jButtonSaveDrugInteractionActionPerformed

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt)//GEN-FIRST:event_jButton1ActionPerformed
    {//GEN-HEADEREND:event_jButton1ActionPerformed
        int row[] = jTableMap.getSelectedRows();
        theHC.theSetupControl.deleteDrugInteraction(vDrugInteraction,row);
        searchMap();
    }//GEN-LAST:event_jButton1ActionPerformed

    private void jTextFieldSearchMapKeyReleased(java.awt.event.KeyEvent evt)//GEN-FIRST:event_jTextFieldSearchMapKeyReleased
    {//GEN-HEADEREND:event_jTextFieldSearchMapKeyReleased
        if(evt.getKeyCode() == java.awt.event.KeyEvent.VK_ENTER) searchMap();
        if(evt.getKeyCode() == java.awt.event.KeyEvent.VK_DOWN) jTableMap.requestFocus();
        if(jTextFieldSearchMap.getText().length() > 2) searchMap();
    }//GEN-LAST:event_jTextFieldSearchMapKeyReleased

    private void jTextFieldSearchDrugInteractionKeyReleased(java.awt.event.KeyEvent evt)//GEN-FIRST:event_jTextFieldSearchDrugInteractionKeyReleased
    {//GEN-HEADEREND:event_jTextFieldSearchDrugInteractionKeyReleased
        if(evt.getKeyCode() == KeyEvent.VK_DOWN)
        {
            if(jTableSearchDrugInteraction.getRowCount()>0)
            {
                jTableSearchDrugInteraction.requestFocus();
                jTableSearchDrugInteraction.setRowSelectionInterval(0,0);
            }
        }
        if(evt.getKeyCode() == java.awt.event.KeyEvent.VK_ENTER) searchDrugInteraction();
        if(this.jTextFieldSearchDrugInteraction.getText().length() > 1) searchDrugInteraction();
    }//GEN-LAST:event_jTextFieldSearchDrugInteractionKeyReleased

    private void hidejButtonAddDrugInteractionActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_hidejButtonAddDrugInteractionActionPerformed
        int[] row = jTableSearchDrugInteraction.getSelectedRows();
        if(row.length==0)
        {   
            theUS.setStatus("ยังไม่ได้เลือกยาที่มีปฏิกิริยาด้วย",UpdateStatus.WARNING);
            return;
        }
        if(jRadioButtonDrug.isSelected())
        {
            if(theDrugStandard==null)
            {
                theUS.setStatus("ยังไม่ได้เลือกยาตั้งต้น",UpdateStatus.WARNING);
                return;
            }
        }
        hDrugInteractionOneDetail = new Hashtable();
        for(int i=0,size=row.length; i<size; i++)
        {   
            DrugStandard drugStandard =(DrugStandard)vDrugStandardInt.get(row[i]);             
            hDrugInteractionOneDetail.put(drugStandard.getObjectId(),new DrugInteractionOneDetail());            
        }        
        //setDrugStandardIntV(vDrugStandardInt);   
    }//GEN-LAST:event_hidejButtonAddDrugInteractionActionPerformed

    private void jButtonSaveMapActionPerformed(java.awt.event.ActionEvent evt)//GEN-FIRST:event_jButtonSaveMapActionPerformed
    {//GEN-HEADEREND:event_jButtonSaveMapActionPerformed
  
        vDrugInteraction = new Vector();  
        DrugStandard drugStandard;
        DrugInteractionOneDetail diod;
        //ยา
        if(jRadioButtonDrug.isSelected())
        {
            //ยาตั้งต้น
            if("".equals(jLabelDrugStandard.getText()))
            {
                theUS.setStatus("ยังไม่ได้เลือกยาตั้งต้น",UpdateStatus.WARNING);
                return;
            }
            //ยาที่มีปฏิกิริยาด้วย
            if(vDrugStandardInt==null)
            {
                theUS.setStatus("ยังไม่ได้เลือกยาที่ทำปฏิกริยาด้วย",UpdateStatus.WARNING);
                return;
            }
            //amp:03/01/2550: พี่เบะเปลี่ยนเป็นให้ map ได้แค่ 1 ต่อ 1 จึงจำเป็นต้องเปลี่ยน vector ในการนำเข้าไปตรวจสอบ
            //เพราะมันจะมีผลกับเรื่องการเตือนเกี่ยวกับ การจับคู่ item ในตัวที่เราไม่ได้เลือก
            /*int[] rows = jTableSearchDrugInteraction.getSelectedRows();
            for(int i=0; i<rows.length; i++)
            {
                drugStandard = (DrugStandard)vDrugStandardInt.get(rows[i]);
                DrugInteraction drugInteractionDrug = new DrugInteraction();
                drugInteractionDrug.drug_standard_original_id = theDrugStandard.getObjectId();
                drugInteractionDrug.drug_standard_interaction_id = drugStandard.getObjectId(); 
                drugInteractionDrug.type = DrugInteractionType.isDrug();
                diod = (DrugInteractionOneDetail)hDrugInteractionOneDetail.get(drugStandard.getObjectId());
                drugInteractionDrug.force = diod.force;
                drugInteractionDrug.act = diod.act;
                drugInteractionDrug.repair = diod.repair;
                vDrugInteraction.addElement(drugInteractionDrug);
            }                
            theHC.theSetupControl.readDrugStandardMapItem(vDrugStandardInt);*/ 
            int[] row = jTableSearchDrugInteraction.getSelectedRows();
            for(int i=0;i<row.length;i++){
                drugStandard = (DrugStandard)vDrugStandardInt.get(row[i]);
                DrugInteraction drugInteractionDrug = new DrugInteraction();
                drugInteractionDrug.drug_standard_original_id = theDrugStandard.getObjectId();
                drugInteractionDrug.drug_standard_interaction_id = drugStandard.getObjectId(); 
                if(drugInteractionDrug.drug_standard_original_id.equals(drugInteractionDrug.drug_standard_interaction_id))
                {
                    theUS.setStatus("กรุณาเลือกคู่ยาที่ทำปฏิกริยาต่อกันและต้องไม่ใช่ยาตัวเดียวกัน",UpdateStatus.WARNING);
                    return;
                }
                drugInteractionDrug.type = DrugInteractionType.isDrug();
                drugInteractionDrug.force = integerTextFieldDrugForce.getText();
                drugInteractionDrug.act = jTextAreaDrugAct.getText();
                drugInteractionDrug.repair = jTextAreaDrugRepair.getText();
                vDrugInteraction.addElement(drugInteractionDrug);             
            }
        } 
        //ความดัน
        else if(jRadioButtonBloodPresure.isSelected())
        {
            if((!doubleTextFieldBloodPresure1.getText().equals("") 
            && !doubleTextFieldBloodPresure2.getText().equals(""))
            && vDrugStandardInt!=null)
            {       
                String blood_presure_user = doubleTextFieldBloodPresure1.getText().concat("/").concat(doubleTextFieldBloodPresure2.getText());
                int[] rows = jTableSearchDrugInteraction.getSelectedRows();
                for(int i=0; i<rows.length; i++)
                {
                    drugStandard = (DrugStandard)vDrugStandardInt.get(rows[i]);
                    DrugInteraction drugInteractionBloodPresure = new DrugInteraction();
                    drugInteractionBloodPresure.drug_standard_original_id = drugStandard.getObjectId();
                    drugInteractionBloodPresure.type = DrugInteractionType.isBloodPresure();
                    drugInteractionBloodPresure.blood_presure = blood_presure_user;                    
                    diod = (DrugInteractionOneDetail)hDrugInteractionOneDetail.get(drugStandard.getObjectId());
                    drugInteractionBloodPresure.force = diod.force;
                    drugInteractionBloodPresure.act = diod.act;
                    drugInteractionBloodPresure.repair = diod.repair;
                    vDrugInteraction.addElement(drugInteractionBloodPresure);
                }
                blood_presure_user = null;
            }
        }
        //ตั้งครรภ์
        else if(jRadioButtonPregnant.isSelected())
        {
            if(vDrugStandardInt!=null)
            {
                int[] rows = jTableSearchDrugInteraction.getSelectedRows();
                for(int i=0; i<rows.length; i++)
                {
                    drugStandard = (DrugStandard)vDrugStandardInt.get(rows[i]);
                    DrugInteraction drugInteractionPregnant = new DrugInteraction();
                    drugInteractionPregnant.drug_standard_original_id = drugStandard.getObjectId();
                    drugInteractionPregnant.type = DrugInteractionType.isPregnant();
                    drugInteractionPregnant.pregnant = "1";
                    diod = (DrugInteractionOneDetail)hDrugInteractionOneDetail.get(drugStandard.getObjectId());
                    drugInteractionPregnant.force = diod.force;
                    drugInteractionPregnant.act = diod.act;
                    drugInteractionPregnant.repair = diod.repair;            
                    vDrugInteraction.addElement(drugInteractionPregnant);
                }
            }
        }   
        drugStandard = null;
        diod=null;
        theHC.theSetupControl.saveDrugInteraction(vDrugInteraction);
        //clearGUI();
        searchMap();
    }//GEN-LAST:event_jButtonSaveMapActionPerformed

    private void jTableDrugStandardMouseReleased(java.awt.event.MouseEvent evt)//GEN-FIRST:event_jTableDrugStandardMouseReleased
    {//GEN-HEADEREND:event_jTableDrugStandardMouseReleased
        jRadioButtonDrug.setSelected(true);
        int row = jTableDrugStandard.getSelectedRow();
        if(row == -1) return;
        theDrugStandard = (DrugStandard)vDrugStandardMain.get(row);        
        setDrugStandardMainV(theDrugStandard.description);
        theHC.theSetupControl.readDrugStandardMapItem(theDrugStandard);
    }//GEN-LAST:event_jTableDrugStandardMouseReleased

    private void jTextFieldSearchDrugStandardKeyReleased(java.awt.event.KeyEvent evt)//GEN-FIRST:event_jTextFieldSearchDrugStandardKeyReleased
    {//GEN-HEADEREND:event_jTextFieldSearchDrugStandardKeyReleased
        if(evt.getKeyCode() == KeyEvent.VK_DOWN)
        {
            if(jTableDrugStandard.getRowCount()>0)
            {
                jTableDrugStandard.requestFocus();
                jTableDrugStandard.setRowSelectionInterval(0,0);
            }
        }
        if(evt.getKeyCode() == java.awt.event.KeyEvent.VK_ENTER) searchDrugStandard();
        if(this.jTextFieldSearchDrugStandard.getText().length() > 1) searchDrugStandard();
    }//GEN-LAST:event_jTextFieldSearchDrugStandardKeyReleased
    
    private void searchDrugStandard()
    {
        String keyword = jTextFieldSearchDrugStandard.getText();
        vDrugStandardMain  = theHC.theSetupControl.listDrugStandardByCodeName(keyword,"1");
        setTableDrugStandard(vDrugStandardMain);
    }
    
    private void setTableDrugStandard(Vector vc)
    {
        TaBleModel tm ;
        String[] column = {GuiLang.setLanguage("ชื่อ")};
        if(vc == null)
        {
            tm = new TaBleModel(column,0);
            jTableDrugStandard.setModel(tm);
            return;
        }
        tm= new TaBleModel(column,vc.size());
        for(int i=0; i<vc.size(); i++)
        {  
            DrugStandard drugStandard = (DrugStandard)vc.get(i);
            tm.setValueAt(drugStandard.description,i,0);
        }        
        jTableDrugStandard.setModel(tm);
        jTableDrugStandard.getColumnModel().getColumn(0).setPreferredWidth(65);
    } 
    
    private void setDrugStandardMainV(String drugStandardDescription)
    {
        jLabelDrugStandard.setText(drugStandardDescription);
    }
    
    private void searchDrugInteraction()
    {
        String keyword = jTextFieldSearchDrugInteraction.getText();
        Vector vSearchDrugInteraction  = theHC.theSetupControl.listDrugStandardByCodeName(keyword,"1");
////        setTableSearcgDrugInteraction(vSearchDrugInteraction
        setDrugStandardIntV(vSearchDrugInteraction);
    }
    
    private void setDrugStandardIntV(Vector vc)
////    private void setTableSearcgDrugInteraction(Vector vc)
    {
        this.vDrugStandardInt = vc;
        TaBleModel tm ;
        String[] column = {GuiLang.setLanguage("ชื่อ")};
        if(vc == null)
        {
            tm = new TaBleModel(column,0);
            jTableSearchDrugInteraction.setModel(tm);
            return;
        }
        tm= new TaBleModel(column,vc.size());
        for(int i=0; i<vc.size(); i++)
        {  
            DrugStandard drugStandard = (DrugStandard)vc.get(i);
            tm.setValueAt(drugStandard.description,i,0);
        }        
        jTableSearchDrugInteraction.setModel(tm);
        jTableSearchDrugInteraction.getColumnModel().getColumn(0).setPreferredWidth(65);//รายละเอียด  
    }
    
////    private void setDrugStandardIntV(Vector vc)
////    {
////        String[] column = {GuiLang.setLanguage("ยาที่มีปฏิกิริยาด้วย")};
////        TaBleModel tm;
////        if(vc != null)
////        {           
////            tm = new TaBleModel(column,vc.size());
////            DrugStandard drugStandard;
////            for(int i=0,size=vc.size(); i<size; i++)
////            {  
////                drugStandard = (DrugStandard)vc.get(i);
////                tm.setValueAt(drugStandard.description,i,0);
////            }
////            jTableDrugInteraction.setModel(tm);
////            drugStandard = null;
////        }
////        else
////        {
////            tm = new TaBleModel(column,0);
////            jTableDrugInteraction.setModel(tm);
////        }        
////    }
    
    private void searchMap()
    {
        String keyword = jTextFieldSearchMap.getText();
        vDrugInteraction  = theHC.theSetupControl.listDrugInteraction(keyword);
        setDrugInteractionV(vDrugInteraction);
    }
    
    private void setDrugInteractionV(Vector vc)
    {   
        String[] column = {GuiLang.setLanguage("ยาตั้งต้น"),
                GuiLang.setLanguage("ยาที่มีปฏิกิริยาด้วย"),
                GuiLang.setLanguage("ความดัน"),
                GuiLang.setLanguage("ตั้งครรภ์"),
                GuiLang.setLanguage("ความแรง"),
                GuiLang.setLanguage("ปฏิกิริยาที่จะเกิด"),
                GuiLang.setLanguage("วิธีแก้ไข")};
        TaBleModel tm;
        if(vc != null)
        {           
            tm = new TaBleModel(column,vc.size());
            for(int i=0,size=vc.size(); i<size; i++)
            {  
                DrugInteraction drugInteraction = (DrugInteraction)vc.get(i);
                tm.setValueAt(drugInteraction.drug_standard_original_description,i,0);
                tm.setValueAt(drugInteraction.drug_standard_interaction_description,i,1);
                tm.setValueAt(drugInteraction.blood_presure,i,2);
                tm.setValueAt(drugInteraction.pregnant,i,3);
                tm.setValueAt(drugInteraction.force,i,4);
                tm.setValueAt(drugInteraction.act,i,5);
                tm.setValueAt(drugInteraction.repair,i,6);
            }
            jTableMap.setModel(tm);
        }
        else
        {
            tm = new TaBleModel(column,0);
            jTableMap.setModel(tm);
        }
        tm.setEditingCol(4,5,6);
        jTableMap.getColumnModel().getColumn(0).setPreferredWidth(300);     
        jTableMap.getColumnModel().getColumn(1).setPreferredWidth(300);
        jTableMap.getColumnModel().getColumn(2).setMaxWidth(0); //(120);
        jTableMap.getColumnModel().getColumn(2).setMinWidth(0); 
        jTableMap.getColumnModel().getColumn(2).setWidth(0); 
        jTableMap.getColumnModel().getColumn(2).setPreferredWidth(0); 
        jTableMap.getColumnModel().getColumn(2).setCellRenderer(TableRenderer.getRendererCenter());
        jTableMap.getColumnModel().getColumn(3).setPreferredWidth(100);
        jTableMap.getColumnModel().getColumn(3).setCellRenderer(celRendererPregnant);
        jTableMap.getColumnModel().getColumn(4).setPreferredWidth(200);  
        jTableMap.getColumnModel().getColumn(4).setCellRenderer(TableRenderer.getRendererCenter()); 
        jTableMap.getColumnModel().getColumn(5).setPreferredWidth(300);
        jTableMap.getColumnModel().getColumn(6).setPreferredWidth(300);        
    }
    
    private void clearGUI()
    {
        jLabelDrugStandard.setText("");
        theDrugStandard = null;
        vDrugStandardInt = null;
        setDrugStandardIntV(null);
        integerTextFieldDrugForce.setText("");
        jTextAreaDrugAct.setText("");
        jTextAreaDrugRepair.setText("");
        doubleTextFieldBloodPresure1.setText("");
        doubleTextFieldBloodPresure2.setText("");        
        jTableDrugStandard.clearSelection();
        jTableSearchDrugInteraction.clearSelection();
        jRadioButtonDrug.setSelected(true);
    }
    
    private void setDrugStandardMainVInteraction(String drug_standard_id)
    {
        if(drug_standard_id!=null)
        {
            theDrugInteractionOneDetail = (DrugInteractionOneDetail)hDrugInteractionOneDetail.get(drug_standard_id);
            integerTextFieldDrugForce.setText(theDrugInteractionOneDetail.force); 
            jTextAreaDrugAct.setText(theDrugInteractionOneDetail.act);
            jTextAreaDrugRepair.setText(theDrugInteractionOneDetail.repair);
        }
    }
    
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.ButtonGroup buttonGroupInteraction;
    private com.hospital_os.gui.font.DefaultFont defaultFont1;
    private com.hospital_os.utility.DoubleTextField doubleTextFieldBloodPresure1;
    private com.hospital_os.utility.DoubleTextField doubleTextFieldBloodPresure2;
    private com.hospital_os.gui.font.FontFormatTitle fontFormatTitle1;
    private javax.swing.JButton hidejButtonAddDrugInteraction;
    private javax.swing.JTextField integerTextFieldDrugForce;
    private javax.swing.JButton jButton1;
    private javax.swing.JButton jButtonSaveDrugInteraction;
    private javax.swing.JButton jButtonSaveMap;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel16;
    private javax.swing.JLabel jLabel17;
    private javax.swing.JLabel jLabel18;
    private javax.swing.JLabel jLabel19;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel20;
    private javax.swing.JLabel jLabel21;
    private javax.swing.JLabel jLabel31;
    private javax.swing.JLabel jLabel32;
    private javax.swing.JLabel jLabel33;
    private javax.swing.JLabel jLabelDrugStandard;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel11;
    private javax.swing.JPanel jPanel20;
    private javax.swing.JPanel jPanel21;
    private javax.swing.JPanel jPanel23;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JPanel jPanel5;
    private javax.swing.JPanel jPanel6;
    private javax.swing.JPanel jPanel7;
    private javax.swing.JPanel jPanel9;
    private javax.swing.JPanel jPanelDrug;
    private javax.swing.JPanel jPanelPressure;
    private javax.swing.JRadioButton jRadioButtonBloodPresure;
    private javax.swing.JRadioButton jRadioButtonDrug;
    private javax.swing.JRadioButton jRadioButtonPregnant;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane14;
    private javax.swing.JScrollPane jScrollPane15;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JScrollPane jScrollPane5;
    private com.hosv3.gui.component.HJTableSort jTableDrugStandard;
    private com.hosv3.gui.component.HJTableSort jTableMap;
    private com.hosv3.gui.component.HJTableSort jTableSearchDrugInteraction;
    private javax.swing.JTextArea jTextAreaDrugAct;
    private javax.swing.JTextArea jTextAreaDrugRepair;
    private javax.swing.JTextField jTextFieldSearchDrugInteraction;
    private javax.swing.JTextField jTextFieldSearchDrugStandard;
    private javax.swing.JTextField jTextFieldSearchMap;
    // End of variables declaration//GEN-END:variables
    
}
