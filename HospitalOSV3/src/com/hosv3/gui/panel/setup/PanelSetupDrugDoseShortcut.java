/*
 * PanelSetupDrugDoseShortcut.java
 *
 * Created on 3 สิงหาคม 2549, 14:51 น.
 */

package com.hosv3.gui.panel.setup;

import java.awt.event.*;
import java.util.Vector;
import com.hosv3.control.*;
import com.hosv3.control.lookup.*;
import com.hosv3.utility.*;
import com.hosv3.subject.*;
import com.hosv3.utility.connection.*;
import com.hosv3.object.*;
import com.hospital_os.utility.TaBleModel;
import com.hospital_os.utility.ComboboxModel;
import com.hospital_os.utility.Gutil;
import com.hosv3.utility.Constant;
import com.hospital_os.object.*;

/**
 *
 * @author  Administrator
 */
public class PanelSetupDrugDoseShortcut extends javax.swing.JPanel
{
    UpdateStatus theUS;
    HosSubject  theHS;
    SetupControl theSetupControl;
    SetupSubject theSetupSubject;
    ComboboxModel theComboboxModel;
    DrugDoseShortcut theDrugDoseShortcut = new DrugDoseShortcut();
    DrugInstruction theDrugInstruction = new DrugInstruction();
    DrugFrequency theDrugFrequency = new DrugFrequency();
    LookupControl theLookupControl;
    // Vector billinggroup = new Vector();
    Vector vdrugdose = new Vector();
    Vector vinstr = new Vector();
    Vector vfreq = new Vector();
    int offset = 23;
    int next = 0;
    int prev = 0;
    int saved = 0; // 0 คือ ไม่สามารถ insertได้ 1 คือ insert ได้
    int category = 0;
    /** pu : 04/08/2549 : เก็บ Index ของ Item ตัวล่างสุดของหน้าปัจจุบัน*/
    int curNext = 0;
    /** pu : 04/08/2549 : เก็บ Index ของ Item ตัวล่างสุดของหน้าก่อนหน้าปัจจุบัน*/
    int curPrev = 0;
    String[] col = {"ลำดับ","รายละเอียด"};
    /** Creates new form PanelDrugDoseShortcut */
    public PanelSetupDrugDoseShortcut()
    {
        initComponents();
        setLanguage();
    }
    public PanelSetupDrugDoseShortcut(HosControl hc,UpdateStatus us)
    {
        initComponents();
        setLanguage();
        setControl(hc,us);
    }
    
    private void setLanguage()
    {
        GuiLang.setLanguage(col);
        GuiLang.setLanguage(jLabel5);
        GuiLang.setLanguage(jLabelCode);
        GuiLang.setLanguage(jLabelDrugDoseShortcut);
        GuiLang.setLanguage(jLabelDrugFrequency);
        GuiLang.setLanguage(jLabelDrugInstruction);
        GuiLang.setLanguage(jLabelICD9code);
        GuiLang.setLanguage(jLabelQtyUnit);
        GuiLang.setLanguage(jButtonSearch);
        GuiLang.setLanguage(jButtonSave);
    }
    
    public void setControl(HosControl hc,UpdateStatus us)
    {
        theUS = us;
        theHS = hc.theHS;
        jTable1.setGuiMode(true);
        theSetupControl = hc.theSetupControl;
        theLookupControl = hc.theLookupControl;
        theSetupSubject = hc.theHS.theSetupSubject;
        hc.theHS.theSetupSubject.addpanelrefrash(this);
        hc.theHS.theSetupSubject.addForLiftAttach(this);    
        setupLookup();
        setEnabled(false);
    }
    
    public void setEnabled(boolean var)
    {
        jTextFieldCode.setEnabled(var);
        //jTextFieldDrugDoseShortcut.setEnabled(var);
        //jComboBoxDrugInstruction.setEnabled(var);
        //jComboBoxDrugFrequency.setEnabled(var);
        //jTextFieldQtyUnit.setEnabled(var);
        //jButtonSave.setEnabled(var);
        //jButtonDel.setEnabled(var);
    }
    public void setupLookup()
    {
        jComboBoxDrugFrequency.setControl(null,new DrugFrequencyLookup(theLookupControl), new DrugFrequency2()); 
        jComboBoxDrugInstruction.setControl(null,new DrugInstructionLookup(theLookupControl), new DrugInstruction2()); 
    }
    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    // <editor-fold defaultstate="collapsed" desc=" Generated Code ">//GEN-BEGIN:initComponents
    private void initComponents() {
        java.awt.GridBagConstraints gridBagConstraints;

        fontFormatTitle1 = new com.hospital_os.gui.font.FontFormatTitle();
        defaultFont1 = new com.hospital_os.gui.font.DefaultFont();
        jPanel6 = new javax.swing.JPanel();
        jLabel5 = new javax.swing.JLabel();
        jPanel4 = new javax.swing.JPanel();
        jLabelICD9code = new javax.swing.JLabel();
        jTextFieldSCode = new javax.swing.JTextField();
        jButtonSearch = new javax.swing.JButton();
        jScrollPane1 = new javax.swing.JScrollPane();
        jTable1 = new com.hosv3.gui.component.HJTableSort();
        jCheckBoxS = new javax.swing.JCheckBox();
        jPanel2 = new javax.swing.JPanel();
        jButtonPrev = new javax.swing.JButton();
        jButtonNext = new javax.swing.JButton();
        jPanel3 = new javax.swing.JPanel();
        jPanel1 = new javax.swing.JPanel();
        jLabelCode = new javax.swing.JLabel();
        jTextFieldCode = new javax.swing.JTextField();
        jLabelDrugDoseShortcut = new javax.swing.JLabel();
        jTextFieldDrugDoseShortcut = new javax.swing.JTextField();
        jLabelDrugInstruction = new javax.swing.JLabel();
        jLabelDrugFrequency = new javax.swing.JLabel();
        jLabelQtyUnit = new javax.swing.JLabel();
        jTextFieldQtyUnit = new javax.swing.JTextField();
        jCheckBoxActive = new javax.swing.JCheckBox();
        jComboBoxDrugInstruction = new com.hosv3.gui.component.HosComboBox();
        jComboBoxDrugFrequency = new com.hosv3.gui.component.HosComboBox();
        jPanel5 = new javax.swing.JPanel();
        jButtonAdd = new javax.swing.JButton();
        jButtonDel = new javax.swing.JButton();
        jButtonSave = new javax.swing.JButton();

        setLayout(new java.awt.GridBagLayout());

        setFont(getFont());
        jPanel6.setLayout(new java.awt.GridBagLayout());

        jLabel5.setFont(fontFormatTitle1);
        jLabel5.setText("\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23 Dose \u0e22\u0e48\u0e2d");
        jPanel6.add(jLabel5, new java.awt.GridBagConstraints());

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.gridwidth = 2;
        gridBagConstraints.insets = new java.awt.Insets(5, 5, 5, 5);
        add(jPanel6, gridBagConstraints);

        jPanel4.setLayout(new java.awt.GridBagLayout());

        jPanel4.setMinimumSize(new java.awt.Dimension(300, 25));
        jPanel4.setPreferredSize(new java.awt.Dimension(300, 404));
        jLabelICD9code.setFont(defaultFont1);
        jLabelICD9code.setText("\u0e04\u0e49\u0e19\u0e2b\u0e32");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(5, 5, 5, 11);
        jPanel4.add(jLabelICD9code, gridBagConstraints);

        jTextFieldSCode.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jTextFieldSCodeActionPerformed(evt);
            }
        });

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(5, 0, 5, 5);
        jPanel4.add(jTextFieldSCode, gridBagConstraints);

        jButtonSearch.setFont(defaultFont1);
        jButtonSearch.setText("\u0e04\u0e49\u0e19\u0e2b\u0e32");
        jButtonSearch.setMargin(new java.awt.Insets(0, 0, 0, 0));
        jButtonSearch.setMaximumSize(new java.awt.Dimension(67, 25));
        jButtonSearch.setMinimumSize(new java.awt.Dimension(67, 25));
        jButtonSearch.setPreferredSize(new java.awt.Dimension(67, 25));
        jButtonSearch.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonSearchActionPerformed(evt);
            }
        });

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 2;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(5, 0, 5, 5);
        jPanel4.add(jButtonSearch, gridBagConstraints);

        jScrollPane1.setMinimumSize(new java.awt.Dimension(100, 22));
        jScrollPane1.setPreferredSize(new java.awt.Dimension(100, 80));
        jTable1.setFont(defaultFont1);
        jTable1.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jTable1KeyReleased(evt);
            }
        });
        jTable1.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseReleased(java.awt.event.MouseEvent evt) {
                jTable1MouseReleased(evt);
            }
        });

        jScrollPane1.setViewportView(jTable1);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 3;
        gridBagConstraints.gridwidth = 3;
        gridBagConstraints.gridheight = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 5, 5, 5);
        jPanel4.add(jScrollPane1, gridBagConstraints);

        jCheckBoxS.setFont(defaultFont1);
        jCheckBoxS.setSelected(true);
        jCheckBoxS.setText("Active");
        jCheckBoxS.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jCheckBoxSActionPerformed(evt);
            }
        });

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.insets = new java.awt.Insets(0, 0, 5, 5);
        jPanel4.add(jCheckBoxS, gridBagConstraints);

        jPanel2.setLayout(new java.awt.GridBagLayout());

        jButtonPrev.setIcon(new javax.swing.ImageIcon(getClass().getResource("/com/hospital_os/images/Back16.gif")));
        jButtonPrev.setMaximumSize(new java.awt.Dimension(24, 24));
        jButtonPrev.setMinimumSize(new java.awt.Dimension(24, 24));
        jButtonPrev.setPreferredSize(new java.awt.Dimension(24, 24));
        jButtonPrev.setRequestFocusEnabled(false);
        jButtonPrev.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonPrevActionPerformed(evt);
            }
        });

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 2;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHEAST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 5, 5, 0);
        jPanel2.add(jButtonPrev, gridBagConstraints);

        jButtonNext.setIcon(new javax.swing.ImageIcon(getClass().getResource("/com/hospital_os/images/Forward16.gif")));
        jButtonNext.setMaximumSize(new java.awt.Dimension(24, 24));
        jButtonNext.setMinimumSize(new java.awt.Dimension(24, 24));
        jButtonNext.setPreferredSize(new java.awt.Dimension(24, 24));
        jButtonNext.setRequestFocusEnabled(false);
        jButtonNext.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonNextActionPerformed(evt);
            }
        });

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 3;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHEAST;
        gridBagConstraints.insets = new java.awt.Insets(0, 0, 5, 5);
        jPanel2.add(jButtonNext, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 2;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        jPanel4.add(jPanel2, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 5, 5, 5);
        add(jPanel4, gridBagConstraints);

        jPanel3.setLayout(new java.awt.GridBagLayout());

        jPanel3.setMinimumSize(new java.awt.Dimension(350, 210));
        jPanel3.setPreferredSize(new java.awt.Dimension(350, 210));
        jPanel1.setLayout(new java.awt.GridBagLayout());

        jPanel1.setBorder(javax.swing.BorderFactory.createEtchedBorder());
        jPanel1.setMinimumSize(new java.awt.Dimension(350, 170));
        jPanel1.setPreferredSize(new java.awt.Dimension(350, 170));
        jLabelCode.setFont(defaultFont1);
        jLabelCode.setText("\u0e0a\u0e37\u0e48\u0e2d Dose \u0e22\u0e48\u0e2d");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(5, 5, 3, 5);
        jPanel1.add(jLabelCode, gridBagConstraints);

        jTextFieldCode.setFont(defaultFont1);
        jTextFieldCode.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jTextFieldCodeKeyReleased(evt);
            }
        });

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(5, 0, 3, 5);
        jPanel1.add(jTextFieldCode, gridBagConstraints);

        jLabelDrugDoseShortcut.setFont(defaultFont1);
        jLabelDrugDoseShortcut.setText("\u0e04\u0e33\u0e04\u0e49\u0e19");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(0, 5, 3, 5);
        jPanel1.add(jLabelDrugDoseShortcut, gridBagConstraints);

        jTextFieldDrugDoseShortcut.setFont(defaultFont1);
        jTextFieldDrugDoseShortcut.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jTextFieldDrugDoseShortcutKeyReleased(evt);
            }
        });

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(0, 0, 3, 5);
        jPanel1.add(jTextFieldDrugDoseShortcut, gridBagConstraints);

        jLabelDrugInstruction.setFont(defaultFont1);
        jLabelDrugInstruction.setText("\u0e27\u0e34\u0e18\u0e35\u0e01\u0e32\u0e23\u0e43\u0e0a\u0e49\u0e22\u0e32");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(0, 5, 3, 5);
        jPanel1.add(jLabelDrugInstruction, gridBagConstraints);

        jLabelDrugFrequency.setFont(defaultFont1);
        jLabelDrugFrequency.setText("\u0e04\u0e27\u0e32\u0e21\u0e16\u0e35\u0e48\u0e43\u0e19\u0e01\u0e32\u0e23\u0e43\u0e0a\u0e49\u0e22\u0e32");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 3;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(0, 5, 3, 5);
        jPanel1.add(jLabelDrugFrequency, gridBagConstraints);

        jLabelQtyUnit.setFont(defaultFont1);
        jLabelQtyUnit.setText("\u0e08\u0e33\u0e19\u0e27\u0e19\u0e17\u0e35\u0e48\u0e43\u0e0a\u0e49");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 4;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(0, 5, 3, 5);
        jPanel1.add(jLabelQtyUnit, gridBagConstraints);

        jTextFieldQtyUnit.setFont(defaultFont1);
        jTextFieldQtyUnit.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jTextFieldQtyUnitKeyReleased(evt);
            }
        });

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 4;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 0, 3, 5);
        jPanel1.add(jTextFieldQtyUnit, gridBagConstraints);

        jCheckBoxActive.setFont(defaultFont1);
        jCheckBoxActive.setText("Active");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 5;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 0, 3, 5);
        jPanel1.add(jCheckBoxActive, gridBagConstraints);

        jComboBoxDrugInstruction.setFont(defaultFont1);
        jComboBoxDrugInstruction.setPreferredSize(new java.awt.Dimension(120, 24));
        jComboBoxDrugInstruction.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jComboBoxDrugInstructionKeyReleased(evt);
            }
        });

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(0, 0, 3, 5);
        jPanel1.add(jComboBoxDrugInstruction, gridBagConstraints);

        jComboBoxDrugFrequency.setFont(defaultFont1);
        jComboBoxDrugFrequency.setPreferredSize(new java.awt.Dimension(120, 24));
        jComboBoxDrugFrequency.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jComboBoxDrugFrequencyKeyReleased(evt);
            }
        });

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 3;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(0, 0, 3, 5);
        jPanel1.add(jComboBoxDrugFrequency, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 0, 5, 0);
        jPanel3.add(jPanel1, gridBagConstraints);

        jPanel5.setLayout(new java.awt.GridBagLayout());

        jButtonAdd.setIcon(new javax.swing.ImageIcon(getClass().getResource("/com/hosv3/gui/images/plus16.gif")));
        jButtonAdd.setMargin(new java.awt.Insets(0, 0, 0, 0));
        jButtonAdd.setMaximumSize(new java.awt.Dimension(24, 24));
        jButtonAdd.setMinimumSize(new java.awt.Dimension(24, 24));
        jButtonAdd.setPreferredSize(new java.awt.Dimension(24, 24));
        jButtonAdd.setRequestFocusEnabled(false);
        jButtonAdd.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonAddActionPerformed(evt);
            }
        });
        jButtonAdd.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jButtonAddKeyReleased(evt);
            }
        });

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        jPanel5.add(jButtonAdd, gridBagConstraints);

        jButtonDel.setIcon(new javax.swing.ImageIcon(getClass().getResource("/com/hosv3/gui/images/minus16.gif")));
        jButtonDel.setMargin(new java.awt.Insets(0, 0, 0, 0));
        jButtonDel.setMaximumSize(new java.awt.Dimension(24, 24));
        jButtonDel.setMinimumSize(new java.awt.Dimension(24, 24));
        jButtonDel.setPreferredSize(new java.awt.Dimension(24, 24));
        jButtonDel.setRequestFocusEnabled(false);
        jButtonDel.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonDelActionPerformed(evt);
            }
        });

        jPanel5.add(jButtonDel, new java.awt.GridBagConstraints());

        jButtonSave.setFont(defaultFont1);
        jButtonSave.setText("\u0e1a\u0e31\u0e19\u0e17\u0e36\u0e01");
        jButtonSave.setMargin(new java.awt.Insets(0, 0, 0, 0));
        jButtonSave.setMinimumSize(new java.awt.Dimension(60, 24));
        jButtonSave.setPreferredSize(new java.awt.Dimension(60, 24));
        jButtonSave.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonSaveActionPerformed(evt);
            }
        });

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.anchor = java.awt.GridBagConstraints.SOUTHEAST;
        gridBagConstraints.weightx = 1.0;
        jPanel5.add(jButtonSave, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.SOUTHEAST;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 0, 5, 0);
        jPanel3.add(jPanel5, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.insets = new java.awt.Insets(0, 0, 5, 5);
        add(jPanel3, gridBagConstraints);

    }// </editor-fold>//GEN-END:initComponents

    private void jButtonAddKeyReleased(java.awt.event.KeyEvent evt)//GEN-FIRST:event_jButtonAddKeyReleased
    {//GEN-HEADEREND:event_jButtonAddKeyReleased
        if(evt.getKeyCode() == KeyEvent.VK_ENTER)
            jButtonAddActionPerformed(null);
    }//GEN-LAST:event_jButtonAddKeyReleased

    private void jCheckBoxSActionPerformed(java.awt.event.ActionEvent evt)//GEN-FIRST:event_jCheckBoxSActionPerformed
    {//GEN-HEADEREND:event_jCheckBoxSActionPerformed
        //pu : 04/08/2549 : กำหนดค่าให้กับ Index สำหรับระบุถึงหน้าปัจจุบัน
        this.curNext = 0;
        this.curPrev = 0;
        searchDrugDoseShortcut();
    }//GEN-LAST:event_jCheckBoxSActionPerformed

    private void jTable1KeyReleased(java.awt.event.KeyEvent evt)//GEN-FIRST:event_jTable1KeyReleased
    {//GEN-HEADEREND:event_jTable1KeyReleased
       if(evt.getKeyCode() == KeyEvent.VK_UP || evt.getKeyCode() == KeyEvent.VK_DOWN) 
           jTable1MouseReleased(null);
    }//GEN-LAST:event_jTable1KeyReleased

    private void jTextFieldDrugDoseShortcutKeyReleased(java.awt.event.KeyEvent evt)//GEN-FIRST:event_jTextFieldDrugDoseShortcutKeyReleased
    {//GEN-HEADEREND:event_jTextFieldDrugDoseShortcutKeyReleased
       if(evt.getKeyCode() == KeyEvent.VK_ENTER)
            jComboBoxDrugInstruction.requestFocus();
    }//GEN-LAST:event_jTextFieldDrugDoseShortcutKeyReleased

    private void jComboBoxDrugFrequencyKeyReleased(java.awt.event.KeyEvent evt)//GEN-FIRST:event_jComboBoxDrugFrequencyKeyReleased
    {//GEN-HEADEREND:event_jComboBoxDrugFrequencyKeyReleased
        if(evt.getKeyCode() == KeyEvent.VK_ENTER)
            jTextFieldQtyUnit.requestFocus();
    }//GEN-LAST:event_jComboBoxDrugFrequencyKeyReleased

    private void jComboBoxDrugInstructionKeyReleased(java.awt.event.KeyEvent evt)//GEN-FIRST:event_jComboBoxDrugInstructionKeyReleased
    {//GEN-HEADEREND:event_jComboBoxDrugInstructionKeyReleased
       if(evt.getKeyCode() == KeyEvent.VK_ENTER)
            jComboBoxDrugFrequency.requestFocus();
    }//GEN-LAST:event_jComboBoxDrugInstructionKeyReleased

    private void jTextFieldCodeKeyReleased(java.awt.event.KeyEvent evt)//GEN-FIRST:event_jTextFieldCodeKeyReleased
    {//GEN-HEADEREND:event_jTextFieldCodeKeyReleased
       if(evt.getKeyCode() == KeyEvent.VK_ENTER)
            jTextFieldDrugDoseShortcut.requestFocus();       
    }//GEN-LAST:event_jTextFieldCodeKeyReleased

    private void jTextFieldQtyUnitKeyReleased(java.awt.event.KeyEvent evt)//GEN-FIRST:event_jTextFieldQtyUnitKeyReleased
    {//GEN-HEADEREND:event_jTextFieldQtyUnitKeyReleased
       if(evt.getKeyCode() == KeyEvent.VK_ENTER)
            jButtonSaveActionPerformed(null);       
    }//GEN-LAST:event_jTextFieldQtyUnitKeyReleased

    private void jTable1MouseReleased(java.awt.event.MouseEvent evt)//GEN-FIRST:event_jTable1MouseReleased
    {//GEN-HEADEREND:event_jTable1MouseReleased
       selectDrugDoseShortcut();
       updateOG();
    }//GEN-LAST:event_jTable1MouseReleased

    private void jTextFieldSCodeActionPerformed(java.awt.event.ActionEvent evt)//GEN-FIRST:event_jTextFieldSCodeActionPerformed
    {//GEN-HEADEREND:event_jTextFieldSCodeActionPerformed
        //pu : 04/08/2549 : กำหนดค่าให้กับ Index สำหรับระบุถึงหน้าปัจจุบัน
        this.curNext = 0;
        this.curPrev = 0;
        searchDrugDoseShortcut();
    }//GEN-LAST:event_jTextFieldSCodeActionPerformed

    private void jButtonPrevActionPerformed(java.awt.event.ActionEvent evt)//GEN-FIRST:event_jButtonPrevActionPerformed
    {//GEN-HEADEREND:event_jButtonPrevActionPerformed
        prevDrugDoseShortcut();
    }//GEN-LAST:event_jButtonPrevActionPerformed

    private void jButtonSaveActionPerformed(java.awt.event.ActionEvent evt)//GEN-FIRST:event_jButtonSaveActionPerformed
    {//GEN-HEADEREND:event_jButtonSaveActionPerformed
        boolean re = true;
        updateGOItem();
        int ret = theSetupControl.saveDrugDoseShortcut(theDrugDoseShortcut); 
        if(ret>0)
        {
            //pu : 04/08/2549 : เก็บ Index ปัจจุบันของหน้าที่กำลังบันทึก
            int count = next - prev;
            this.curNext = next - count;
            this.curPrev = prev - offset;
            setEnabled(false);
            prepareOGDrugDoseShortcut();
            updateOG();
            searchDrugDoseShortcut();
        }
    }//GEN-LAST:event_jButtonSaveActionPerformed

    private void jButtonDelActionPerformed(java.awt.event.ActionEvent evt)//GEN-FIRST:event_jButtonDelActionPerformed
    {//GEN-HEADEREND:event_jButtonDelActionPerformed
       deleteDrugDoseShortcut();
    }//GEN-LAST:event_jButtonDelActionPerformed

    private void jButtonAddActionPerformed(java.awt.event.ActionEvent evt)//GEN-FIRST:event_jButtonAddActionPerformed
    {//GEN-HEADEREND:event_jButtonAddActionPerformed
       insertDrugDoseShortcut();
    }//GEN-LAST:event_jButtonAddActionPerformed

    private void jButtonNextActionPerformed(java.awt.event.ActionEvent evt)//GEN-FIRST:event_jButtonNextActionPerformed
    {//GEN-HEADEREND:event_jButtonNextActionPerformed
        nextDrugDoseShortcut();
    }//GEN-LAST:event_jButtonNextActionPerformed

    private void jButtonSearchActionPerformed(java.awt.event.ActionEvent evt)//GEN-FIRST:event_jButtonSearchActionPerformed
    {//GEN-HEADEREND:event_jButtonSearchActionPerformed
        //pu : 04/08/2549 : กำหนดค่าให้กับ Index สำหรับระบุถึงหน้าปัจจุบัน
        this.curNext = 0;
        this.curPrev = 0;
        searchDrugDoseShortcut();
        setEnabled(false);
        clearAll();
    }//GEN-LAST:event_jButtonSearchActionPerformed
    private void updateGOItem()
    {
        // set Item
        theDrugDoseShortcut.code = Gutil.CheckReservedWords(jTextFieldCode.getText());
        theDrugDoseShortcut.description  = Gutil.CheckReservedWords(jTextFieldDrugDoseShortcut.getText());
        theDrugDoseShortcut.drug_instruction_id = ComboboxModel.getCodeComboBox(jComboBoxDrugInstruction);
        theDrugDoseShortcut.drug_frequency_id  = ComboboxModel.getCodeComboBox(jComboBoxDrugFrequency);
        theDrugDoseShortcut.qty = Gutil.CheckReservedWords(jTextFieldQtyUnit.getText());
        if(jCheckBoxActive.isSelected())
            theDrugDoseShortcut.active = "1";
        else    theDrugDoseShortcut.active = "0";
    }
    
    private void prevDrugDoseShortcut()
    {   setTable(vdrugdose,0);
    }
    
    private void nextDrugDoseShortcut()
    {
        setTable(vdrugdose,1);
    }
    
    private void insertDrugDoseShortcut()
    {   saved = 1;
        setEnabled(true);
        clearAll();
        jTextFieldCode.requestFocus();
        jTable1.clearSelection();
    }
    private void deleteDrugDoseShortcut()
    {
        int row = jTable1.getSelectedRow();
        if(row == -1)
        {
            theUS.setStatus("กรุณาเลือกรายการ Dose ย่อที่ต้องการลบ", UpdateStatus.WARNING);
            return;
        }       
            int ret = theSetupControl.deleteDrugDoseShortcutByPk(theDrugDoseShortcut);
            if(ret==0)
                return;
            setEnabled(false);
            clearAll();
            //pu : 07/08/2549 : เก็บ Index ปัจจุบัน
            int count = next - prev;
            this.curNext = next - count;
            this.curPrev = prev - offset;
            searchDrugDoseShortcut();
    }
    private void searchDrugDoseShortcut()
    {  //pu : 04/08/2549 : กำหนดค่า Index ให้กับหน้าที่ต้องการแสดง
        next = this.curNext;
        prev =  this.curPrev;
        String search = jTextFieldSCode.getText();
        String active = "0";
        if(jCheckBoxS.isSelected())
            active = "1";
        vdrugdose =  theSetupControl.listDrugDoseShortcutAll(search, active);
        setTable(vdrugdose,1);
    }
    
    private void selectDrugDoseShortcut()
    {
        setEnabled(true);
        clearAll();
        int row = jTable1.getSelectedRow();
        theDrugDoseShortcut  =  (DrugDoseShortcut)vdrugdose.get(row + prev);
        prepareOGDrugDoseShortcut();
    }
    
    private void prepareOGDrugDoseShortcut()
    {
        theDrugFrequency = new DrugFrequency();
        theDrugInstruction = new DrugInstruction();
        theDrugDoseShortcut = theSetupControl.listDrugDoseShortcutByPk(theDrugDoseShortcut.getObjectId());
        theDrugFrequency = theSetupControl.listDrugFrequencyByPK(theDrugDoseShortcut.drug_frequency_id);
        theDrugInstruction = theSetupControl.listDrugInstructionByPK(theDrugDoseShortcut.drug_instruction_id);
    }
    
    private void updateOG()
    {
        jTextFieldCode.setText(theDrugDoseShortcut.code);
        jTextFieldDrugDoseShortcut.setText(theDrugDoseShortcut.description);
        Gutil.setGuiData(jComboBoxDrugInstruction,theDrugDoseShortcut.drug_instruction_id);
        Gutil.setGuiData(jComboBoxDrugFrequency,theDrugDoseShortcut.drug_frequency_id);
        jTextFieldQtyUnit.setText(theDrugDoseShortcut.qty);
        if(theDrugDoseShortcut.active.equals("1"))
            jCheckBoxActive.setSelected(true);
        else    jCheckBoxActive.setSelected(false);
    }
    
    private void setTable(Vector voffice,int off)
    {
        DrugDoseShortcut of = new DrugDoseShortcut();
        int count = offset;
        int p =0;
        int n =0;
        int c =0;
        if(voffice != null && voffice.size() != 0)
        {
            if(off == 1)//กดปุ่ม next
            {   p = prev;
                n = next;
                prev = next;
                next = next + offset;
                if(next >= vdrugdose.size())
                {   next = vdrugdose.size();
                    count = next - prev;
                }
                if(count == 0)
                {   prev = p;
                    next = n;
                    count = n - p;
                }
            }
            else //กดปุ่ม previous
            {   next = prev;
                prev = prev - offset;
                if(prev <=0)
                {    prev = 0;
                     next = offset;
                }
                if(next >= vdrugdose.size())
                {   next= vdrugdose.size();
                    count = next;
                }
            }
            TaBleModel tm = new TaBleModel(col,count);
            for(int i=0;i<count;i++)
            {
                of = (DrugDoseShortcut)voffice.get(i+prev);
                tm.setValueAt(of.code,i,0);
                tm.setValueAt(of.description,i,1);                
            }
            jTable1.setModel(tm);
        }
        else
        {   TaBleModel tm = new TaBleModel(col,0);
            jTable1.setModel(tm);
        }
        setTableListDefault();
    }
    private void setTableListDefault()
    {
        jTable1.getColumnModel().getColumn(0).setPreferredWidth(35); // ลำดับ
        jTable1.getColumnModel().getColumn(1).setPreferredWidth(100); // รายละเอียด
        if(jTable1.getRowCount()==1)
        {
            jTable1.setRowSelectionInterval(0,0);
            jTable1MouseReleased(null);
        }
    }
    private void clearAll()
    {   jTextFieldCode.setText("");
        jTextFieldDrugDoseShortcut.setText("");
        jTextFieldQtyUnit.setText("");
        jCheckBoxActive.setSelected(true);
        this.theDrugDoseShortcut = new DrugDoseShortcut();
    }
    
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private com.hospital_os.gui.font.DefaultFont defaultFont1;
    private com.hospital_os.gui.font.FontFormatTitle fontFormatTitle1;
    private javax.swing.JButton jButtonAdd;
    private javax.swing.JButton jButtonDel;
    private javax.swing.JButton jButtonNext;
    private javax.swing.JButton jButtonPrev;
    private javax.swing.JButton jButtonSave;
    private javax.swing.JButton jButtonSearch;
    private javax.swing.JCheckBox jCheckBoxActive;
    private javax.swing.JCheckBox jCheckBoxS;
    private com.hosv3.gui.component.HosComboBox jComboBoxDrugFrequency;
    private com.hosv3.gui.component.HosComboBox jComboBoxDrugInstruction;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabelCode;
    private javax.swing.JLabel jLabelDrugDoseShortcut;
    private javax.swing.JLabel jLabelDrugFrequency;
    private javax.swing.JLabel jLabelDrugInstruction;
    private javax.swing.JLabel jLabelICD9code;
    private javax.swing.JLabel jLabelQtyUnit;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JPanel jPanel4;
    private javax.swing.JPanel jPanel5;
    private javax.swing.JPanel jPanel6;
    private javax.swing.JScrollPane jScrollPane1;
    private com.hosv3.gui.component.HJTableSort jTable1;
    private javax.swing.JTextField jTextFieldCode;
    private javax.swing.JTextField jTextFieldDrugDoseShortcut;
    private javax.swing.JTextField jTextFieldQtyUnit;
    private javax.swing.JTextField jTextFieldSCode;
    // End of variables declaration//GEN-END:variables
    
}
