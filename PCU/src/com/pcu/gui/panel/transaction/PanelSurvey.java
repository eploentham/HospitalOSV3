/*
 * PanelUncontagious.java
 *
 * Created on 21 กุมภาพันธ์ 2549, 10:44 น.
 */

package com.pcu.gui.panel.transaction;
import com.pcu.control.AllComboBoxControl;
import com.pcu.control.HomeControl;
import com.pcu.control.PCUObject;
import com.pcu.gui.dialog.HosDialog;
import javax.swing.*;
import java.util.*;
import com.pcu .object.*;
import com.pcu.utility.*;
import com.pcu.utility.DateUtil;
import com.pcu.control.HosManage;
import com.hospital_os.object.Employee;
import com.hospital_os.object.Visit;
import com.hospital_os.object.Patient;
import com.hospital_os.utility.ComboboxModel;
import com.hospital_os.utility.TaBleModel;
import com.hospital_os.utility.Gutil;
import com.hospital_os.utility.*;
import com.hospital_os.utility.Constant;
import com.hosv3.control.LookupControl;
import com.hosv3.utility.connection.UpdateStatus;

/**
 *
 * @author  kingland
 */
public class PanelSurvey extends javax.swing.JPanel {
    private JFrame theJFrame;
    HosManage theHM;
    private com.pcu.object.Home theHome;
    private HomeControl theHomeControl;
    private Vector vHome = new Vector();
    private Vector vPerson;
    private AllComboBoxControl theAllComboBoxControl;
    private Family theFamily;
    private Employee theEmployee;
    private Visit theVisit;
    private Patient thePatient;
    private CelRendererSexType theCelRendererSexType = new CelRendererSexType();
    CellRendererHos hnRender = new CellRendererHos(CellRendererHos.HN);
    HosDialog theHosDialog;
    private PCUObject thePCUObject;

    private UpdateStatus theUS;
    private LookupControl theLC;
    /** Creates new form PanelUncontagious */
    public PanelSurvey() {
        initComponents();
    }
    public void setControl(HosManage hm,HosDialog hd,UpdateStatus us) {
        theHM = hm;
        theHosDialog = hd;
        theAllComboBoxControl = hm.theHosControl.theAllComboBoxControl;
        theHomeControl = hm.theHosControl.theHomeControl;
        theLC = hm.theHC.theLookupControl;
        initCombobox();
        this.panelCheckHealth1.setControl(theHM,hd);
        this.panelChronic1.setControl(theHM,hd);
        this.panelMaim1.setControl(theHM,hd);
        this.panelUncontagious1.setControl(theHM,hd);
        this.setUpdateStatus(us);
        setLanguage();
    }
    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    // <editor-fold defaultstate="collapsed" desc=" Generated Code ">//GEN-BEGIN:initComponents
    private void initComponents() {
        java.awt.GridBagConstraints gridBagConstraints;

        defaultFont1 = new com.hospital_os.gui.font.DefaultFont();
        jPanel7 = new javax.swing.JPanel();
        jTabbedPane1 = new javax.swing.JTabbedPane();
        panelUncontagious1 = new com.pcu.gui.panel.transaction.PanelUncontagious();
        panelChronic1 = new com.pcu.gui.panel.transaction.PanelChronic();
        panelMaim1 = new com.pcu.gui.panel.transaction.PanelMaim();
        panelCheckHealth1 = new com.pcu.gui.panel.transaction.PanelCheckHealth();
        jPanel3 = new javax.swing.JPanel();
        jScrollPane1 = new javax.swing.JScrollPane();
        jTableHome = new com.hosv3.gui.component.HJTableSort();
        jPanel12 = new javax.swing.JPanel();
        jPanel14 = new javax.swing.JPanel();
        jComboBoxVillage = new javax.swing.JComboBox();
        jButtonRefresh = new javax.swing.JButton();
        jPanel15 = new javax.swing.JPanel();
        jTextFieldSearchHome = new javax.swing.JTextField();
        jButtonSearchHome = new javax.swing.JButton();
        jCheckBox = new javax.swing.JCheckBox();
        jLabelSearch = new javax.swing.JLabel();
        jPanel1 = new javax.swing.JPanel();
        jScrollPane2 = new javax.swing.JScrollPane();
        jTablePerson = new com.hosv3.gui.component.HJTableSort();
        jPanel2 = new javax.swing.JPanel();
        jLabelName = new javax.swing.JLabel();
        jTextFieldLastName = new javax.swing.JTextField();
        jTextFieldName = new javax.swing.JTextField();
        jButtonSearchFamily = new javax.swing.JButton();
        jPanel4 = new javax.swing.JPanel();
        jLabelPrefixNameLastName = new javax.swing.JLabel();
        jLabelAddress = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();

        setLayout(new java.awt.GridBagLayout());

        jPanel7.setLayout(new java.awt.BorderLayout());

        jTabbedPane1.setFont(defaultFont1);
        jTabbedPane1.addTab("\u0e42\u0e23\u0e04\u0e17\u0e31\u0e48\u0e27\u0e44\u0e1b", panelUncontagious1);

        panelChronic1.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Chronic", javax.swing.border.TitledBorder.LEADING, javax.swing.border.TitledBorder.TOP));
        jTabbedPane1.addTab("Chronic", panelChronic1);

        jTabbedPane1.addTab("\u0e04\u0e27\u0e32\u0e21\u0e1e\u0e34\u0e01\u0e32\u0e23", panelMaim1);

        panelCheckHealth1.setBorder(javax.swing.BorderFactory.createTitledBorder(""));
        jTabbedPane1.addTab("CheckHealth", panelCheckHealth1);

        jPanel7.add(jTabbedPane1, java.awt.BorderLayout.CENTER);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.fill = java.awt.GridBagConstraints.VERTICAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(5, 5, 0, 5);
        add(jPanel7, gridBagConstraints);

        jPanel3.setLayout(new java.awt.GridBagLayout());

        jTableHome.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {

            }
        ));
        jTableHome.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jTableHomeKeyReleased(evt);
            }
        });
        jTableHome.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseReleased(java.awt.event.MouseEvent evt) {
                jTableHomeMouseReleased(evt);
            }
        });

        jScrollPane1.setViewportView(jTableHome);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.SOUTHWEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(5, 5, 0, 5);
        jPanel3.add(jScrollPane1, gridBagConstraints);

        jPanel12.setLayout(new java.awt.GridBagLayout());

        jPanel14.setLayout(new java.awt.GridBagLayout());

        jComboBoxVillage.setMinimumSize(new java.awt.Dimension(100, 20));
        jComboBoxVillage.setPreferredSize(new java.awt.Dimension(100, 20));
        jComboBoxVillage.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jComboBoxVillageActionPerformed(evt);
            }
        });

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.weightx = 1.0;
        jPanel14.add(jComboBoxVillage, gridBagConstraints);

        jButtonRefresh.setIcon(new javax.swing.ImageIcon(getClass().getResource("/com/pcu/images/Refresh2.gif")));
        jButtonRefresh.setToolTipText("Refresh");
        jButtonRefresh.setMaximumSize(new java.awt.Dimension(26, 26));
        jButtonRefresh.setMinimumSize(new java.awt.Dimension(26, 26));
        jButtonRefresh.setPreferredSize(new java.awt.Dimension(26, 26));
        jButtonRefresh.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonRefreshActionPerformed(evt);
            }
        });

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHEAST;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 5, 0, 0);
        jPanel14.add(jButtonRefresh, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 5, 0, 0);
        jPanel12.add(jPanel14, gridBagConstraints);

        jPanel15.setLayout(new java.awt.GridBagLayout());

        jTextFieldSearchHome.setMinimumSize(new java.awt.Dimension(150, 21));
        jTextFieldSearchHome.setPreferredSize(new java.awt.Dimension(150, 21));
        jTextFieldSearchHome.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jTextFieldSearchHomeActionPerformed(evt);
            }
        });

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.weightx = 1.0;
        jPanel15.add(jTextFieldSearchHome, gridBagConstraints);

        jButtonSearchHome.setFont(defaultFont1);
        jButtonSearchHome.setText("Search");
        jButtonSearchHome.setToolTipText("\u0e04\u0e49\u0e19\u0e2b\u0e32\u0e08\u0e32\u0e01\u0e1a\u0e49\u0e32\u0e19\u0e40\u0e25\u0e02\u0e17\u0e35\u0e48");
        jButtonSearchHome.setMargin(new java.awt.Insets(0, 0, 0, 0));
        jButtonSearchHome.setMaximumSize(new java.awt.Dimension(67, 24));
        jButtonSearchHome.setMinimumSize(new java.awt.Dimension(67, 24));
        jButtonSearchHome.setPreferredSize(new java.awt.Dimension(67, 24));
        jButtonSearchHome.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonSearchHomeActionPerformed(evt);
            }
        });

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.EAST;
        gridBagConstraints.insets = new java.awt.Insets(0, 5, 0, 0);
        jPanel15.add(jButtonSearchHome, gridBagConstraints);
        jButtonSearchHome.getAccessibleContext().setAccessibleName("\u0e04\u0e49\u0e19\u0e2b\u0e32");

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.insets = new java.awt.Insets(11, 5, 0, 0);
        jPanel12.add(jPanel15, gridBagConstraints);

        jCheckBox.setFont(defaultFont1);
        jCheckBox.setSelected(true);
        jCheckBox.setText("Village:");
        jCheckBox.setToolTipText("\u0e41\u0e2a\u0e14\u0e07\u0e1a\u0e49\u0e32\u0e19\u0e17\u0e38\u0e01\u0e2b\u0e25\u0e31\u0e07\u0e43\u0e19\u0e17\u0e38\u0e01\u0e2b\u0e21\u0e38\u0e48\u0e1a\u0e49\u0e32\u0e19");
        jCheckBox.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jCheckBoxActionPerformed(evt);
            }
        });

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        jPanel12.add(jCheckBox, gridBagConstraints);

        jLabelSearch.setFont(defaultFont1);
        jLabelSearch.setText("\u0e04\u0e33\u0e04\u0e49\u0e19\u0e2b\u0e32");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        gridBagConstraints.insets = new java.awt.Insets(11, 0, 0, 0);
        jPanel12.add(jLabelSearch, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(5, 5, 0, 5);
        jPanel3.add(jPanel12, gridBagConstraints);

        jPanel1.setLayout(new java.awt.GridBagLayout());

        jPanel1.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Family", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, defaultFont1));
        jScrollPane2.setBorder(null);
        jTablePerson.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {

            }
        ));
        jTablePerson.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jTablePersonKeyReleased(evt);
            }
        });
        jTablePerson.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseReleased(java.awt.event.MouseEvent evt) {
                jTablePersonMouseReleased(evt);
            }
        });

        jScrollPane2.setViewportView(jTablePerson);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(5, 5, 5, 5);
        jPanel1.add(jScrollPane2, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 3;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(5, 5, 5, 5);
        jPanel3.add(jPanel1, gridBagConstraints);

        jPanel2.setLayout(new java.awt.GridBagLayout());

        jPanel2.setRequestFocusEnabled(false);
        jLabelName.setFont(defaultFont1);
        jLabelName.setText("\u0e0a\u0e37\u0e48\u0e2d-\u0e2a\u0e01\u0e38\u0e25");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
        jPanel2.add(jLabelName, gridBagConstraints);

        jTextFieldLastName.setMinimumSize(new java.awt.Dimension(80, 21));
        jTextFieldLastName.setPreferredSize(new java.awt.Dimension(80, 21));
        jTextFieldLastName.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jTextFieldLastNameActionPerformed(evt);
            }
        });

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 2;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 5, 0, 0);
        jPanel2.add(jTextFieldLastName, gridBagConstraints);

        jTextFieldName.setMinimumSize(new java.awt.Dimension(80, 21));
        jTextFieldName.setPreferredSize(new java.awt.Dimension(80, 21));
        jTextFieldName.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jTextFieldNameActionPerformed(evt);
            }
        });

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(0, 5, 0, 0);
        jPanel2.add(jTextFieldName, gridBagConstraints);

        jButtonSearchFamily.setFont(defaultFont1);
        jButtonSearchFamily.setText("Search");
        jButtonSearchFamily.setToolTipText("\u0e04\u0e49\u0e19\u0e2b\u0e32\u0e08\u0e32\u0e01\u0e1a\u0e49\u0e32\u0e19\u0e40\u0e25\u0e02\u0e17\u0e35\u0e48");
        jButtonSearchFamily.setMargin(new java.awt.Insets(0, 0, 0, 0));
        jButtonSearchFamily.setMaximumSize(new java.awt.Dimension(67, 24));
        jButtonSearchFamily.setMinimumSize(new java.awt.Dimension(67, 24));
        jButtonSearchFamily.setPreferredSize(new java.awt.Dimension(67, 24));
        jButtonSearchFamily.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonSearchFamilyActionPerformed(evt);
            }
        });

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 3;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.EAST;
        gridBagConstraints.insets = new java.awt.Insets(0, 5, 0, 0);
        jPanel2.add(jButtonSearchFamily, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(11, 5, 0, 5);
        jPanel3.add(jPanel2, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.weighty = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(5, 5, 0, 0);
        add(jPanel3, gridBagConstraints);

        jPanel4.setLayout(new java.awt.GridBagLayout());

        jPanel4.setPreferredSize(new java.awt.Dimension(10, 40));
        jLabelPrefixNameLastName.setFont(new java.awt.Font("Angsana New", 1, 20));
        jLabelPrefixNameLastName.setText("-");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.insets = new java.awt.Insets(0, 5, 0, 0);
        jPanel4.add(jLabelPrefixNameLastName, gridBagConstraints);

        jLabelAddress.setFont(new java.awt.Font("Angsana New", 1, 20));
        jLabelAddress.setText("-");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 3;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.insets = new java.awt.Insets(0, 5, 0, 0);
        jPanel4.add(jLabelAddress, gridBagConstraints);

        jLabel3.setFont(new java.awt.Font("Angsana New", 1, 24));
        jLabel3.setForeground(new java.awt.Color(51, 153, 255));
        jLabel3.setText("\u0e0a\u0e37\u0e48\u0e2d");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        jPanel4.add(jLabel3, gridBagConstraints);

        jLabel4.setFont(new java.awt.Font("Angsana New", 1, 24));
        jLabel4.setForeground(new java.awt.Color(51, 153, 255));
        jLabel4.setText("\u0e17\u0e35\u0e48\u0e2d\u0e22\u0e39\u0e48");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 2;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.insets = new java.awt.Insets(0, 5, 0, 0);
        jPanel4.add(jLabel4, gridBagConstraints);

        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridwidth = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.weightx = 1.0;
        gridBagConstraints.insets = new java.awt.Insets(5, 5, 0, 5);
        add(jPanel4, gridBagConstraints);

    }// </editor-fold>//GEN-END:initComponents

    private void jTablePersonKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTablePersonKeyReleased
        this.jTablePersonMouseReleased(null);
    }//GEN-LAST:event_jTablePersonKeyReleased
    
    private void jTextFieldLastNameActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jTextFieldLastNameActionPerformed
        jButtonSearchFamilyActionPerformed(null);
    }//GEN-LAST:event_jTextFieldLastNameActionPerformed
    
    private void jTextFieldNameActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jTextFieldNameActionPerformed
        jButtonSearchFamilyActionPerformed(null);
    }//GEN-LAST:event_jTextFieldNameActionPerformed
    
    private void jButtonSearchFamilyActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButtonSearchFamilyActionPerformed
        if(!jTextFieldName.getText().equals("")||!jTextFieldLastName.getText().equals("")){
            vPerson = new Vector();
            //vPerson =  theHomeControl.listFamilyByName(jTextFieldName.getText(), jTextFieldLastName.getText());
            vPerson =  theHomeControl.listPatientByName("",jTextFieldName.getText(), jTextFieldLastName.getText());
            setTablePerson(vPerson);
        }
        else
        {
             this.theUS.setStatus(GutilPCU.getTextBundle("กรุณากรอกข้อมูลชื่อ-นามสกุลก่อนการค้นหา"), UpdateStatus.WARNING);
        }
    }//GEN-LAST:event_jButtonSearchFamilyActionPerformed
    
    private void jTablePersonMouseReleased(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jTablePersonMouseReleased
        if(jTablePerson.isEnabled() == true) {
            int rowPerson = this.jTablePerson.getSelectedRow();
            if(rowPerson == -1) {
                return;
            }
            theFamily = (Family)vPerson.get(rowPerson);
            setFamily(this.theFamily);
            setHeader(this.theFamily);            
        }
    }//GEN-LAST:event_jTablePersonMouseReleased
    
    private void jTableHomeKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTableHomeKeyReleased
        int row = this.jTableHome.getSelectedRow();
        if(row!=-1) {
            this.theHome = (com.pcu.object.Home)this.vHome.get(row);
        }
        selectFamily();
    }//GEN-LAST:event_jTableHomeKeyReleased
    
    private void jTableHomeMouseReleased(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jTableHomeMouseReleased
        if(jTableHome.isEnabled() == true) {
            theFamily = null;
            int row = this.jTableHome.getSelectedRow();
            if(row!=-1) {
                this.theHome = (com.pcu.object.Home)this.vHome.get(row);
            }
            selectFamily();
            clearGUIAllPanel();
            setFamily(null);
            setHeader(null);
        }
    }//GEN-LAST:event_jTableHomeMouseReleased
    
    private void jCheckBoxActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jCheckBoxActionPerformed
        jComboBoxVillage.setEnabled(jCheckBox.isSelected());
        searchHome();
    }//GEN-LAST:event_jCheckBoxActionPerformed
    
    private void jTextFieldSearchHomeActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jTextFieldSearchHomeActionPerformed
        if(jTextFieldSearchHome.getText().length()>=1)
            searchHome();
        else if (jTextFieldSearchHome.getText().equals(""))
            searchHome();
    }//GEN-LAST:event_jTextFieldSearchHomeActionPerformed
    
    private void jButtonSearchHomeActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButtonSearchHomeActionPerformed
        searchHome();
    }//GEN-LAST:event_jButtonSearchHomeActionPerformed
    
    private void jComboBoxVillageActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jComboBoxVillageActionPerformed
        searchHome();
    }//GEN-LAST:event_jComboBoxVillageActionPerformed
    
    private void jButtonRefreshActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButtonRefreshActionPerformed
        ComboboxModel.initComboBox(this.jComboBoxVillage,this.theAllComboBoxControl.listVillage());
    }//GEN-LAST:event_jButtonRefreshActionPerformed
    
    /**
     * เซต Enable Component ต่างๆ
     * @param
     * @return
     * @author kingland
     * @date 04-03-2549
     */
    private void setEnabled(Visit visit) {
    }
    /**
     * เซต Enable Component ต่างๆ
     * @param
     * @return
     * @author kingland
     * @date 04-03-2549
     */
    public void setEnabled(boolean boo) {
        jComboBoxVillage.setEnabled(boo);
        jButtonRefresh.setEnabled(boo);
        jTextFieldSearchHome.setEnabled(boo);
        jButtonSearchHome.setEnabled(boo);
        jCheckBox.setEnabled(boo);
        jTableHome.setEnabled(boo);
        jTextFieldName.setEnabled(boo);
        jTextFieldLastName.setEnabled(boo);
        jButtonSearchFamily.setEnabled(boo);
//        jTablePerson.setEnabled(boo);
    }
    /**
     * เคลียร์Guiทั้งหมด
     * @param
     * @return
     * @author kingland
     * @date 03-03-2549
     */
    public void clearGUIAllPanel() {
        this.panelChronic1.clearGUIChronicAll();
        this.panelUncontagious1.clearGUIUncontagiousAll();
        this.panelMaim1.clearGUIUncontagiousAll();
        this.panelCheckHealth1.clearGUICheckHealthAll();
        setHeader(null);
        theFamily = null;
        jTablePerson.clearSelection();
//        clearGuiSurvey();
    }
    /**
     * เคลียร์Gui
     * @param
     * @return
     * @author kingland
     * @date 03-03-2549
     */
    public void clearGuiSurvey()
    {
        if(thePCUObject == null)
        {
            setHeader(null); 
            setTablePerson(null);
            theFamily = null;
        }
        
    }
    /**
     * เซตประชากรให้กับ Panel ต่างๆ
     * @param
     * @return
     * @author kingland
     * @date 01-03-2549
     */
    public void setFamily(Family family) {
//        theHM.theHC.thePatientControl;
        Patient p = null;
        if(family!=null)
            p = theHM.theHC.thePatientControl.readPatientByFamilyID(family.getObjectId());
        theHM.theHC.theDiagnosisControl.setFamily(family);
        theHM.theHC.theDiagnosisControl.setPatient(thePatient);
        this.panelChronic1.setFamily(this.theFamily);
        this.panelUncontagious1.setFamily(this.theFamily);
        this.panelMaim1.setFamily(this.theFamily);
        this.panelCheckHealth1.setFamily(this.theFamily);
    }
    /**
     * เซตภาษา
     * @param
     * @return
     * @author kingland
     * @date 01-03-2549
     */
    private void setLanguage() {
        GutilPCU.setGuiLang(jTabbedPane1);
        GutilPCU.setGuiLang(jLabel3);
        GutilPCU.setGuiLang(jLabel4);
        jLabelSearch.setText(GutilPCU.getTextBundle("Search"));
        jCheckBox.setText(GutilPCU.getTextBundle(jCheckBox.getText()));
        jButtonSearchHome.setText(GutilPCU.getTextBundle("Search"));
        jScrollPane2.setBorder(new javax.swing.border.TitledBorder(GutilPCU.getTextBundle("Family")));
        jLabelName.setText(GutilPCU.getTextBundle("FirstName"));
        jButtonSearchFamily.setText(GutilPCU.getTextBundle("Search"));
        GutilPCU.setGuiLang(jCheckBox);
        GutilPCU.setGuiLang(jButtonSearchHome);
        GutilPCU.setGuiLang(jButtonSearchFamily);
        GutilPCU.setGuiLang(jLabelSearch);
        GutilPCU.setGuiLang(jLabelName);
        GutilPCU.setGuiLang(jPanel1);
        GutilPCU.setGuiLang(jTabbedPane1);
    }
    /**
     * เซต JFrame
     * @param
     * @return
     * @author kingland
     * @date 01-03-2549
     */
    public void setJFrame(JFrame frame) {
        this.theJFrame = frame;
    }
    /**
     * เซตสถานะให้กับPanel
     * @param
     * @return
     * @author kingland
     * @date 01-03-2549
     */
    private void setUpdateStatus(UpdateStatus us)
    {
        theUS = us;
        this.panelChronic1.setUpdateStatus(theUS);
        this.panelUncontagious1.setUpdateStatus(theUS);
        this.panelCheckHealth1.setUpdateStatus(theUS);
        this.panelMaim1.setUpdateStatus(theUS);
        theHM.theHosControl.theUncontagiousControl.setUpdateStatus(theUS);
    }
    /**
     * เซต Header ของ Frame
     * @param
     * @return
     * @author kingland
     * @date 22-03-2549
     */
    private void setHeader(Family family) {
        if(family != null) 
        {
            jLabelPrefixNameLastName.setText(theAllComboBoxControl.getValueOfPrefix(family.f_prefix_id)+" "+family.patient_name+"  "+family.patient_last_name);
            Vector vHome = new Vector();
            Home h = theHM.theHosControl.theHomeControl.listHomeByHomeID(family.home_id);
            vHome.add(h);
            h = null;
            if(vHome != null && vHome.size() == 1)
            {
                Home home = (Home)vHome.get(0);
                jLabelAddress.setText(home.home_house+" ม."+home.home_moo
                        +"  ต."+this.theLC.readAddressString(home.home_tambol)
                        +"  อ."+theLC.readAddressString(home.home_amphur)
                        +"  จ."+theLC.readAddressString(home.home_changwat));
            } 
        }
        else
        {
            jLabelPrefixNameLastName.setText("-");
            jLabelAddress.setText("-");
        }
    }
    /**
     * เลือก JFrame
     * @param
     * @return
     * @author kingland
     * @date 01-03-2549
     */
    public JFrame getJFrame() {
        return this.theJFrame;
    }
    /**
     * เซต object จาก HospitalOS
     * @param
     * @return
     * @author kingland
     * @date 25-02-2549
     */
    public void setObject(PCUObject pcuobject) {
        Constant.println("_henbe_______________________" + this.getClass().toString());
        thePCUObject = pcuobject;
        if(pcuobject != null) {
            theEmployee = pcuobject.getEmployee();
            thePatient = pcuobject.getPatient();
            theVisit = pcuobject.getVisit();
            theFamily = pcuobject.getFamily();
        }
        this.panelChronic1.getObject(pcuobject);
        this.panelUncontagious1.getObject(pcuobject);
        this.panelMaim1.getObject(pcuobject);
        this.panelCheckHealth1.getObject(pcuobject);
        //ตรวจสอบว่ามีvisit หรือไม่        
        setEnabled(theVisit);
        //ตรวจสอบว่ามีผู้ป่วยหรือไม่
        jLabelPrefixNameLastName.setText("-");
        jLabelAddress.setText("-");
    }
    /**
     *
     * @param
     * @return
     * @author kingland
     * @date 23-02-2549
     */
    private void setTablePerson(Vector v) {
        String[] col = {GutilPCU.getTextBundle("HN"),
                GutilPCU.getTextBundle("Name")+"-"+GutilPCU.getTextBundle("SurName"),
                GutilPCU.getTextBundle("Age"),
                GutilPCU.getTextBundle("Sex")};
        String datatime = Gutil.getTextCurrentDateTime(theHM.theHosControl.theConnectionInf);        
                Family familyTemp = new Family();
                TaBleModel tm ;
                String status = "";
                if(v != null) {
                    tm = new TaBleModel(col,v.size());
                    for(int i=0, size=v.size(); i<size; i++) {
                        familyTemp = (Family)v.get(i);
                        if(familyTemp.status_id.equals("1"))
                            status = GutilPCU.getTextBundle("OwnerHome");
                        else
                            status = GutilPCU.getTextBundle("Away");
                        String family_age = DateUtil.calculateAgeLong(familyTemp.patient_birthday,datatime);
                        tm.setValueAt("-",i,0);
                        tm.setValueAt(theAllComboBoxControl.getValueOfPrefix(familyTemp.f_prefix_id)+"   "+familyTemp.patient_name+"   "+familyTemp.patient_last_name,i,1);
                        tm.setValueAt(family_age+(" ")+GutilPCU.getTextBundle("Year"),i,2);                        
                        tm.setValueAt(familyTemp.f_sex_id,i,3);
                    }
                } else {
                    tm= new TaBleModel(col,0);
                }
                familyTemp = null;
                this.jTablePerson.setModel(tm);
                jTablePerson.getColumnModel().getColumn(0).setPreferredWidth(30);
                jTablePerson.getColumnModel().getColumn(0).setCellRenderer(hnRender);
                jTablePerson.getColumnModel().getColumn(1).setPreferredWidth(120);
                jTablePerson.getColumnModel().getColumn(2).setPreferredWidth(5);
                jTablePerson.getColumnModel().getColumn(2).setCellRenderer(ColumnTableRenderer.getRendererCenter());
                jTablePerson.getColumnModel().getColumn(3).setPreferredWidth(15);
                jTablePerson.getColumnModel().getColumn(3).setCellRenderer(theCelRendererSexType);
    }
    /**
     * เลือกประชาการ
     * @param
     * @return
     * @author kingland
     * @date 23-02-2549
     */
    private void selectFamily() {
        vPerson = new Vector();
        vPerson =  theHomeControl.listFamilyByHomeId(theHome.getObjectId());
        setTablePerson(vPerson);
    }
    /**
     * เซตข้อมูลใน Combobox
     * @param
     * @return
     * @author kingland
     * @date 23-02-2549
     */
    private void initCombobox() {
        ComboboxModel.initComboBox(this.jComboBoxVillage,this.theAllComboBoxControl.listVillage());
    }
    
    /**
     * ค้นหาบ้าน
     * @param vector of village, village_id
     * @return village_name
     * @author henbe
     * @date 23-12-2549
     */
    public String readVillageName(Vector v,String id){
        for(int i=0;i<v.size();i++){
            ComboFix vv = (ComboFix)v.get(i);
            if(vv.code.equals(id))
                return vv.name;
        }
        return "";
    }
    /**
     * ค้นหาบ้าน
     * @param
     * @return
     * @author kingland
     * @date 23-02-2549
     */
    private void searchHome() {
        /***ค้นหาบ้าน***/
        
        Constant.println("__PanelSurvey___________________________searchHome()");
        String search = "";//เลขที่บ้าน
        String search2 = "";//รหัสหมู่บ้าน
        search = this.jTextFieldSearchHome.getText();  //รับค่าจาก TextFiledsearch
        search2 = Gutil.getGuiData(this.jComboBoxVillage); //รับค่าจาก ComboBoxVillage
        if(!this.jCheckBox.isSelected()) //ถ้ามีการเลือกแสดงบ้านตามหมู่บ้านที่เลือก
        {
            this.vHome =  this.theHomeControl.listHomeAllVillage(search, false);
            this.jComboBoxVillage.setEnabled(false);
        } else {
            if(!search2.equals("")) {
                this.vHome =  this.theHomeControl.listHomeByHomeNumber(search,search2, false);
            }
            this.jComboBoxVillage.setEnabled(true);
        }
        /***SetTable***/
        String[] col = {GutilPCU.getTextBundle("HomeNumber"),
                GutilPCU.getTextBundle("หมู่ที่:"),
                GutilPCU.getTextBundle("ถนน:"),
                GutilPCU.getTextBundle("VillageName")};
                
                com.pcu.object.Home homeTemp = new com.pcu.object.Home();
                TaBleModel tm ;
                
                if(this.vHome != null) {
                    tm = new TaBleModel(col,this.vHome.size());
                    for(int i=0, size=this.vHome.size(); i<size; i++) {
                        homeTemp = (com.pcu.object.Home)this.vHome.get(i);
                        tm.setValueAt(homeTemp.home_house,i,0);
                        tm.setValueAt(homeTemp.home_moo,i,1);
                        tm.setValueAt(homeTemp.home_road,i,2);
                        tm.setValueAt(readVillageName(theAllComboBoxControl.listVillage(),homeTemp.village_id),i,3);
                        
                    }
                } else {
                    tm= new TaBleModel(col,0);
                }
                
                homeTemp = null;
                this.jTableHome.setModel(tm);
                /***SetTableDefault***/
                jTableHome.getColumnModel().getColumn(0).setPreferredWidth(50);     /*บ้านเลขที่*/
                jTableHome.getColumnModel().getColumn(1).setPreferredWidth(30);     /*หมู่ที่*/
                jTableHome.getColumnModel().getColumn(2).setPreferredWidth(50);     /*ถนน*/
                jTableHome.getColumnModel().getColumn(3).setPreferredWidth(130);     /*ชื่อหมู่บ้าน*/
    }
    
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private com.hospital_os.gui.font.DefaultFont defaultFont1;
    private javax.swing.JButton jButtonRefresh;
    private javax.swing.JButton jButtonSearchFamily;
    private javax.swing.JButton jButtonSearchHome;
    private javax.swing.JCheckBox jCheckBox;
    private javax.swing.JComboBox jComboBoxVillage;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabelAddress;
    private javax.swing.JLabel jLabelName;
    private javax.swing.JLabel jLabelPrefixNameLastName;
    private javax.swing.JLabel jLabelSearch;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel12;
    private javax.swing.JPanel jPanel14;
    private javax.swing.JPanel jPanel15;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JPanel jPanel4;
    private javax.swing.JPanel jPanel7;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JTabbedPane jTabbedPane1;
    private com.hosv3.gui.component.HJTableSort jTableHome;
    private com.hosv3.gui.component.HJTableSort jTablePerson;
    private javax.swing.JTextField jTextFieldLastName;
    private javax.swing.JTextField jTextFieldName;
    private javax.swing.JTextField jTextFieldSearchHome;
    private com.pcu.gui.panel.transaction.PanelCheckHealth panelCheckHealth1;
    private com.pcu.gui.panel.transaction.PanelChronic panelChronic1;
    private com.pcu.gui.panel.transaction.PanelMaim panelMaim1;
    private com.pcu.gui.panel.transaction.PanelUncontagious panelUncontagious1;
    // End of variables declaration//GEN-END:variables

}
