/*
 * PanelGeneralPCU.java
 *
 * Created on 9 กุมภาพันธ์ 2549, 14:00 น.
 */

package com.generalpcu.gui.panel;

import com.generalpcu.control.ManageControl;
import com.generalpcu.control.ManageControlSubject;
import com.generalpcu.usecase.ManageSubject;
import com.generalpcu.usecase.ShowPanelSelectResp;
import com.generalpcu.utility.Config;
import com.generalpcu.utility.Report;
import com.hospital_os.object.Version;

/**
 *
 * @author  pu
 */
public class PanelGeneralPCU extends javax.swing.JPanel implements ShowPanelSelectResp
{
    private ManageControlSubject theMCS;
    private ManageControl theMC;
    private ManageSubject theMS;
    private PanelReportFile thePanelReportFile;
    private PanelReportIndex thePanelReportIndex;
    
    /** Creates new form PanelGeneralPCU */
    public PanelGeneralPCU(){
        initComponents();
    }
    public PanelGeneralPCU(ManageControlSubject msc)
    {
        theMCS = msc;
        theMC = theMCS.theManageControl;
        theMS = theMCS.theManageSubject;
        theMS.theShowPanelSelectSubject.registerGUIManage(this);
        initComponents();
        initPanel();
    }
    public void setControl(ManageControlSubject msc)
    {
        theMCS = msc;
        theMC = theMCS.theManageControl;
        theMS = theMCS.theManageSubject;
        theMS.theShowPanelSelectSubject.registerGUIManage(this);
        initPanel();
    }
    private void initPanel()
    {
        thePanelReportFile = new PanelReportFile(theMCS);
        thePanelReportIndex = new PanelReportIndex(theMCS);
        
        // นำ panel ต่างๆมาใส่ใน Container ที่กำหนด
        jPanelMainIndex.setLayout(new java.awt.BorderLayout());
        jPanelMainIndex.add(thePanelReportIndex, java.awt.BorderLayout.CENTER);
        // นำ panel ต่างๆมาใส่ใน Container ที่กำหนด
        jPanelReport.setLayout(new java.awt.BorderLayout());
        jPanelReport.add(thePanelReportFile, java.awt.BorderLayout.CENTER);
        
    }
    
    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    // <editor-fold defaultstate="collapsed" desc=" Generated Code ">//GEN-BEGIN:initComponents
    private void initComponents()
    {
        jPanelMain = new javax.swing.JPanel();
        jPanelMainIndex = new javax.swing.JPanel();
        jPanelReport = new javax.swing.JPanel();

        setLayout(new java.awt.BorderLayout());

        jPanelMain.setLayout(new java.awt.CardLayout());

        jPanelMain.add(jPanelMainIndex, "MainReport");

        jPanelMain.add(jPanelReport, "Report");

        add(jPanelMain, java.awt.BorderLayout.CENTER);

    }
    // </editor-fold>//GEN-END:initComponents
   /**
     *  ใช้แสดง CardReport ที่กำหนดตาม param ที่กำหนด
     *  @param namepanel เป็นชื่อ panelที่กำหนดใน cardLayout ที่กำหนด
     */
    public void showCardReport(String namepanel)
    {               
        java.awt.CardLayout layout = (java.awt.CardLayout)this.jPanelMain.getLayout();
        layout.show(this.jPanelMain, namepanel);
    }
    
    /**ใช้ในการกำหนด version ของ การออกรายงานทั่วไป
     *@return เป็น Object ของ Vesion
     */
    public Version getVersion()
    {
        Version version = new Version();
        version.app_code = Config.getTextBundle("Version");
        version.description = Config.getTextBundle("Description");
        version.update_time = Config.getTextBundle("Update");
        version.db_code = Config.getTextBundle("VersionDatabaseUse");        
        return version;        
    }
    
    public void notifyCallBackToMainReport()
    {
        showCardReport("MainReport");
    }
    
    public void notifyCallReportShow(Report report)
    {
        showCardReport("Report");
    }
    
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JPanel jPanelMain;
    private javax.swing.JPanel jPanelMainIndex;
    private javax.swing.JPanel jPanelReport;
    // End of variables declaration//GEN-END:variables
    
}
